<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>Vote Not For Sale - Electoral Integrity Pledge</title>
    <link rel="stylesheet" href="share-modal.css">
    <!-- Add Firebase SDK scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        /* Responsive breakpoints */
        /* Mobile devices */
        @media screen and (max-width: 480px) {
            .hero h1 {
                font-size: 0.91rem; /* Reduced by 30% from 1.3rem */
                padding: 8px 12px;
                margin-bottom: 0.8rem;
                border-width: 2px;
            }
            
            .hero p {
                font-size: 0.95rem;
                line-height: 1.4;
                margin-bottom: 1.5rem;
                padding: 0 10px;
                display: block;
                width: 100%;
                overflow-wrap: break-word;
                word-wrap: break-word;
            }
            
            .modal {
                width: 95%;
                padding: 1.5rem;
            }
            
            .modal-title {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 0.7rem 1.2rem;
            }
            
            header {
                padding: 0.8rem 1rem;
            }
            
            .logo {
                font-size: 1.2rem;
            }
            
            .share-icon {
                width: 20px;
                height: 20px;
            }
        }
        
        /* Tablets */
        @media screen and (min-width: 481px) and (max-width: 768px) {
            .hero h1 {
                font-size: 1.26rem; /* Reduced by 30% from 1.8rem */
                padding: 12px 20px;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
        }
        
        body {
            line-height: 1.6;
            color: #333;
            background-color: #f8f8f8;
        }
        
        /* Header styles */
        header {
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        /* Navigation and auth styles */
        .nav-links {
            display: flex;
            gap: 1rem;
        }
        
        .nav-links a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: #3498db;
        }
        
        .auth-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .auth-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }
        
        .login-btn {
            background-color: transparent;
            color: #3498db;
            border: 1px solid #3498db;
        }
        
        .login-btn:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .signup-btn {
            background-color: #3498db;
            color: white;
        }
        
        .signup-btn:hover {
            background-color: #2980b9;
        }
        
        /* User profile display */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Auth modals */
        .auth-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .auth-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .auth-modal {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .auth-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .auth-modal-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin: 0;
        }
        
        .close-auth-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .form-group label {
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-group input {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .auth-submit-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            margin-top: 0.5rem;
        }
        
        .auth-submit-btn:hover {
            background-color: #2980b9;
        }
        
        .auth-switch {
            text-align: center;
            margin-top: 1rem;
            color: #7f8c8d;
        }
        
        .auth-switch a {
            color: #3498db;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* Hero section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        
        .hero h1 {
            font-size: 1.54rem; /* Reduced by 30% from 2.2rem */
            margin-bottom: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
            padding: 15px 25px;
            border: 3px solid rgba(255,255,255,0.7);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255,255,255,0.5);
            background-color: rgba(0,0,0,0.2);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin-bottom: 2rem;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
            padding: 0 10px;
            width: 100%;
            box-sizing: border-box;
        }
        
        /* Pledge Counter Styles */
        .pledge-counter {
            margin: 0.5rem 0 1.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .counter-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 0.8rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: counterPulse 2s infinite alternate;
        }
        
        .ph-flag {
            position: absolute;
            left: -150px;
            top: 50%;
            transform: translateY(-50%);
            height: 50%;
            width: auto;
            filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
            transition: transform 0.3s ease;
        }
        
        .counter-container:hover + .ph-flag {
            transform: translateY(-50%) scale(1.1);
        }
        
        .counter-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .counter-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 0.2rem;
        }
        
        .counter-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes counterPulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }
        
        /* Responsive counter styles */
        @media screen and (max-width: 480px) {
            .counter-container {
                padding: 0.6rem 1.2rem;
            }
            
            .counter-number {
                font-size: 1.8rem;
            }
            
            .counter-label {
                font-size: 0.7rem;
            }
            
            .ph-flag {
                left: -120px;
                right: auto;
                height: 15px;
                width: 30px;
            }
            
            .pledge-counter {
                margin-right: 20px;
            }
        }
        
        /* Button styles */
        .button-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .btn:hover {
            background-color: #c0392b;
        }
        
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: 2px solid rgba(255, 255, 255, 0.7);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
            margin-left: 5px;
        }
        
        .share-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .share-icon {
            width: 32px;
            height: 32px;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        /* Form styles */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        /* Custom searchable dropdown styles */
        .search-dropdown-container {
            position: relative;
            width: 100%;
            display: flex;
            align-items: center;
        }
        
        #city-search {
            width: 100%;
            padding-left: 2rem;
            padding-right: 2rem;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>');
            background-repeat: no-repeat;
            background-position: 0.5rem center;
            background-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .dropdown-arrow {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #999;
            pointer-events: none;
            transition: transform 0.2s ease;
        }
        
        .dropdown-arrow.active {
            transform: translateY(-50%) rotate(180deg);
        }
        
        .custom-dropdown {
            position: relative;
            width: 100%;
        }
        
        .custom-dropdown-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 250px;
            overflow-y: auto;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 0 0 4px 4px;
            z-index: 10;
            display: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 2px;
        }
        
        /* Mobile optimizations for dropdown */
        @media screen and (max-width: 480px) {
            .custom-dropdown-options {
                max-height: 200px;
            }
            
            .custom-dropdown-option {
                padding: 0.6rem;
            }
        }
        
        .custom-dropdown-options.active {
            display: block;
        }
        
        .custom-dropdown-option {
            padding: 0.8rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .custom-dropdown-option:hover {
            background-color: #f5f5f5;
        }
        
        .custom-dropdown-selected {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            background-color: white;
            text-align: left;
            position: relative;
        }
        
        .custom-dropdown-selected::after {
            content: '';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #999;
        }
        
        .custom-dropdown-selected.active::after {
            border-top: none;
            border-bottom: 6px solid #999;
        }
        
        .custom-dropdown select {
            display: none;
        }
        
        @media screen and (max-width: 480px) {
            input, textarea, select {
                padding: 0.6rem;
                font-size: 0.9rem;
            }
            
            .form-group {
                margin-bottom: 1rem;
            }
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .required {
            color: #e74c3c;
        }
        
        /* Success message popup */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #2ecc71;
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            display: none;
            text-align: center;
            max-width: 90%;
            width: 400px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .success-message.active {
            opacity: 1;
        }
        
        /* Countdown timer */
        .countdown-timer {
            margin-top: 15px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .countdown-bar {
            width: 100%;
            height: 4px;
            background-color: rgba(255, 255, 255, 0.3);
            margin-top: 8px;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .countdown-progress {
            height: 100%;
            width: 100%;
            background-color: white;
            transform-origin: left;
            transition: transform 3s linear;
        }
        
        .success-message .close-success {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
        }
        
        .pledge-info {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }
        
        .pledge-info p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #555;
        }
        
        .pledge-info p:last-child {
            margin-bottom: 0;
        }
        
        /* Pledges list */
        .pledges-container {
            margin-top: 2rem;
        }
        
        .pledges-list {
            list-style: none;
        }
        
        .pledge-item {
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 4px 4px 0;
        }
        
        .pledge-meta {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }
        
        @media screen and (max-width: 480px) {
            .pledges-container {
                margin-top: 1.5rem;
            }
            
            .pledge-item {
                padding: 0.8rem;
                margin-bottom: 0.8rem;
            }
            
            .pledge-meta {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">Vote Not For Sale</div>
        <div class="nav-links">
            <a href="index.html" class="active">Home</a>
            <a href="comments.html">Comments</a>
        </div>
        <div class="auth-buttons" id="auth-buttons">
            <button class="auth-btn login-btn" id="login-btn">Log In</button>
            <button class="auth-btn signup-btn" id="signup-btn">Sign Up</button>
        </div>
        <div class="user-profile" id="user-profile" style="display: none;">
            <div class="user-avatar" id="user-avatar">U</div>
            <span class="user-name" id="user-name">User</span>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero">
        <h1>MY VOTE IS NOT FOR SALE</h1>
        <div class="pledge-counter">
            <div class="counter-container">
                <span class="counter-number" id="pledge-count">0</span>
                <span class="counter-label">HINDI AKO FOR SALE</span>
            </div>
            <img src="ph-flag.svg" alt="Philippine Flag" class="ph-flag">
        </div>
        <p class="tagalog-text">Isang pangako sa integridad ng halalan. Ipagtanggol ang Demokrasya sa pamamagitan ng paninindigan. Ang iyong boto ay ang iyong boses sa ating demokrasya. Sa pamamagitan ng pangakong ito, ikaw ay nangangakong poprotektahan ang integridad ng ating proseso ng halalan at lalaban sa katiwalian.</p>
        <div class="button-container">
            <button class="btn" id="pledge-btn">TAKE THE PLEDGE</button>
            <button class="share-btn" id="share-btn" aria-label="Share">
                <img src="share-icon.png" alt="Share" class="share-icon">
            </button>
        </div>
    </section>
    
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Take the Electoral Integrity Pledge</h2>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            
            <div class="success-message" id="success-message">
                Your pledge has been recorded. Thank you for standing up for electoral integrity!
            </div>
            
            <form id="pledge-form">
                <div class="form-group">
                    <label for="name">Name <span class="required">*</span></label>
                    <input type="text" id="name" required>
                </div>
                
                <div class="form-group">
                    <label for="city">City or Municipality <span class="required">*</span></label>
                    <div class="custom-dropdown">
                        <div class="search-dropdown-container">
                            <input type="text" id="city-search" placeholder="Search for your city..." autocomplete="off">
                            <div class="dropdown-arrow" id="dropdown-arrow"></div>
                        </div>
                        <div class="custom-dropdown-options" id="city-options"></div>
                        <select id="city" required style="display: none;">
                            <option value="" disabled selected>Select your city or municipality</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email">Email (optional)</label>
                    <input type="email" id="email">
                </div>
                

                
                <button type="submit" class="btn">Submit Pledge</button>
                
                <div class="pledge-info">
                    <p>By submitting, you pledge to vote with integrity and resist vote buying.</p>
                    <p>Your information is secure and will not be shared publicly.</p>
                    <p>Encourage others to take the pledge! Share this with your friends.</p>
                </div>
            </form>
            

            

        </div>
    </div>
    
    <!-- Share Modal Overlay -->
    <div class="share-modal-overlay" id="share-modal-overlay">
        <div class="share-modal">
            <div class="share-modal-header">
                <h2 class="share-modal-title">Share with friends</h2>
                <button class="close-share-modal" id="close-share-modal">&times;</button>
            </div>
            
            <div class="share-options">
                <a href="#" class="share-option" id="share-facebook">
                    <div class="share-icon-container facebook">
                        <svg width="20" height="20"><use xlink:href="#icon-facebook"></use></svg>
                    </div>
                    <span class="share-option-label">Facebook</span>
                </a>
                
                <a href="#" class="share-option" id="share-messenger">
                    <div class="share-icon-container messenger">
                        <svg width="20" height="20"><use xlink:href="#icon-messenger"></use></svg>
                    </div>
                    <span class="share-option-label">Messenger</span>
                </a>
                
                <a href="#" class="share-option" id="share-whatsapp">
                    <div class="share-icon-container whatsapp">
                        <svg width="20" height="20"><use xlink:href="#icon-whatsapp"></use></svg>
                    </div>
                    <span class="share-option-label">WhatsApp</span>
                </a>
                
                <a href="#" class="share-option" id="share-twitter">
                    <div class="share-icon-container twitter">
                        <svg width="20" height="20"><use xlink:href="#icon-twitter"></use></svg>
                    </div>
                    <span class="share-option-label">Twitter</span>
                </a>
                
                <a href="#" class="share-option" id="share-linkedin">
                    <div class="share-icon-container linkedin">
                        <svg width="20" height="20"><use xlink:href="#icon-linkedin"></use></svg>
                    </div>
                    <span class="share-option-label">LinkedIn</span>
                </a>
                
                <a href="#" class="share-option" id="share-telegram">
                    <div class="share-icon-container telegram">
                        <svg width="20" height="20"><use xlink:href="#icon-telegram"></use></svg>
                    </div>
                    <span class="share-option-label">Telegram</span>
                </a>
                
                <a href="#" class="share-option" id="share-email">
                    <div class="share-icon-container email">
                        <svg width="20" height="20"><use xlink:href="#icon-email"></use></svg>
                    </div>
                    <span class="share-option-label">Email</span>
                </a>
                
                <a href="#" class="share-option" id="share-copy">
                    <div class="share-icon-container copy">
                        <svg width="20" height="20"><use xlink:href="#icon-copy"></use></svg>
                    </div>
                    <span class="share-option-label">Copy Link</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Include SVG Icons -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <!-- Facebook Icon -->
        <symbol id="icon-facebook" viewBox="0 0 24 24">
          <path d="M13.397 20.997v-8.196h2.765l.411-3.209h-3.176V7.548c0-.926.258-1.56 1.587-1.56h1.684V3.127c-.82-.088-1.643-.13-2.467-.127-2.444 0-4.122 1.492-4.122 4.231v2.355H7.332v3.209h2.753v8.202h3.312z"/>
        </symbol>
        
        <!-- Messenger Icon -->
        <symbol id="icon-messenger" viewBox="0 0 24 24">
          <path d="M12 2C6.36 2 2 6.13 2 11.7c0 2.91 1.19 5.44 3.14 7.17.16.14.26.39.27.65l.05 2.02c.02.65.69 1.07 1.27.75l2.26-1.24c.18-.09.38-.13.58-.1 1.13.29 2.35.44 3.43.44 5.64 0 10-4.13 10-9.7C23 6.13 18.64 2 12 2zm6 7.46l-2.93 4.67c-.47.73-1.47.92-2.17.37l-2.34-1.73c-.23-.18-.56-.18-.79 0l-3.16 2.4c-.47.35-1.07-.11-.79-.62l2.93-4.67c.47-.73 1.47-.92 2.17-.37l2.34 1.73c.23.18.56.18.79 0l3.16-2.4c.47-.35 1.07.11.79.62z"/>
        </symbol>
        
        <!-- WhatsApp Icon -->
        <symbol id="icon-whatsapp" viewBox="0 0 24 24">
          <path d="M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"/>
        </symbol>
        
        <!-- Twitter/X Icon -->
        <symbol id="icon-twitter" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </symbol>
        
        <!-- Email Icon -->
        <symbol id="icon-email" viewBox="0 0 24 24">
          <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
        </symbol>
        
        <!-- Copy Link Icon -->
        <symbol id="icon-copy" viewBox="0 0 24 24">
          <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
        </symbol>
        
        <!-- LinkedIn Icon -->
        <symbol id="icon-linkedin" viewBox="0 0 24 24">
          <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/>
        </symbol>
        
        <!-- Telegram Icon -->
        <symbol id="icon-telegram" viewBox="0 0 24 24">
          <path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>
        </symbol>
    </svg>
    
    <script>
        // DOM Elements
        const pledgeBtn = document.getElementById('pledge-btn');
        const shareBtn = document.getElementById('share-btn');
        const modalOverlay = document.getElementById('modal-overlay');
        const closeModal = document.getElementById('close-modal');
        
        // DOM Elements for share modal
        const shareModalOverlay = document.getElementById('share-modal-overlay');
        const closeShareModal = document.getElementById('close-share-modal');
        
        // Share data configuration
        const shareData = {
            title: 'Vote Not For Sale - Electoral Integrity Pledge',
            text: 'Join me in taking a stand for electoral integrity. My vote is not for sale!',
            url: window.location.href
        };
        
        // Share functionality
        shareBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            
            // Check if Web Share API is supported and not in WebView
            if (navigator.share && !isInWebView()) {
                try {
                    await navigator.share(shareData);
                    console.log('Shared successfully');
                } catch (err) {
                    console.log('Error sharing:', err);
                    // Fallback to custom share modal
                    showShareModal();
                }
            } else {
                // Fallback to custom share modal
                showShareModal();
            }
        });
        
        // Show share modal
        function showShareModal() {
            shareModalOverlay.classList.add('active');
        }
        
        // Hide share modal
        closeShareModal.addEventListener('click', (e) => {
            e.preventDefault();
            shareModalOverlay.classList.remove('active');
        });
        
        // Close share modal when clicking outside
        shareModalOverlay.addEventListener('click', (e) => {
            if (e.target === shareModalOverlay) {
                shareModalOverlay.classList.remove('active');
            }
        });
        
        // Add touch event for close button
        closeShareModal.addEventListener('touchend', (e) => {
            e.preventDefault();
            shareModalOverlay.classList.remove('active');
        }, false);
        
        // Fallback function to copy URL to clipboard
        function copyToClipboard(text) {
            // Create temporary input element
            const input = document.createElement('input');
            input.style.position = 'fixed';
            input.style.opacity = 0;
            input.value = text;
            document.body.appendChild(input);
            
            // Select and copy text
            input.select();
            input.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            // Remove temporary element
            document.body.removeChild(input);
            
            // Show feedback to user
            alert('Link copied to clipboard! Share it with your friends.');
        }
        
        // Social media sharing functionality
        document.getElementById('share-facebook').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareData.url)}&quote=${encodeURIComponent(shareData.text)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-messenger').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.facebook.com/dialog/send?app_id=936439947551747&link=${encodeURIComponent(shareData.url)}&redirect_uri=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-whatsapp').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareData.text + ' ' + shareData.url)}`;
            window.open(url, '_blank');
        });
        
        document.getElementById('share-twitter').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}&url=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=300');
        });
        
        document.getElementById('share-linkedin').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-telegram').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://t.me/share/url?url=${encodeURIComponent(shareData.url)}&text=${encodeURIComponent(shareData.text)}`;
            window.open(url, '_blank');
        });
        
        document.getElementById('share-email').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `mailto:?subject=${encodeURIComponent(shareData.title)}&body=${encodeURIComponent(shareData.text + '\n\n' + shareData.url)}`;
            window.location.href = url;
        });
        
        document.getElementById('share-copy').addEventListener('click', (e) => {
            e.preventDefault();
            copyToClipboard(shareData.url);
            shareModalOverlay.classList.remove('active');
        });
        const pledgeForm = document.getElementById('pledge-form');
        const successMessage = document.getElementById('success-message');
        const cityDropdown = document.getElementById('city');
        // pledgesList element removed
        
        // Philippine Cities and Municipalities Data
        const philippineCities = [
        "Aborlan",
    "Abra De Ilog",
    "Abucay",
    "Abulug",
    "Abuyog",
    "Adams",
    "Agdangan",
    "Aglipay",
    "Agno",
    "Agoncillo",
    "Agoo",
    "Aguilar",
    "Aguinaldo",
    "Agutaya",
    "Ajuy",
    "Akbar",
    "Alabat",
    "Alabel",
    "Alamada",
    "Alaminos",
    "Alangalang",
    "Al-Barka",
    "Albuera",
    "Alburquerque",
    "Alcala",
    "Alcala",
    "Alcantara",
    "Alcantara",
    "Alcoy",
    "Alegria",
    "Alegria",
    "Aleosan",
    "Alfonso",
    "Alfonso Castaneda",
    "Alfonso Lista",
    "Aliaga",
    "Alicia",
    "Alicia",
    "Alicia",
    "Alilem",
    "Alimodian",
    "Alitagtag",
    "Allacapan",
    "Allen",
    "Almagro",
    "Almeria",
    "Aloguinsan",
    "Aloran",
    "Altavas",
    "Alubijid",
    "Amadeo",
    "Amai Manabilang",
    "Ambaguio",
    "Amlan",
    "Ampatuan",
    "Amulung",
    "Anahawan",
    "Anao",
    "Anda",
    "Anda",
    "Angadanan",
    "Angat",
    "Angono",
    "Anilao",
    "Anini-Y",
    "Antequera",
    "Antipas",
    "Apalit",
    "Aparri",
    "Araceli",
    "Arakan",
    "Arayat",
    "Argao",
    "Aringay",
    "Aritao",
    "Aroroy",
    "Arteche",
    "Asingan",
    "Asipulo",
    "Asturias",
    "Asuncion",
    "Atimonan",
    "Atok",
    "Aurora",
    "Aurora",
    "Ayungon",
    "Baao",
    "Babatngon",
    "Bacacay",
    "Bacarra",
    "Baclayon",
    "Bacnotan",
    "Baco",
    "Bacolod",
    "Bacolod-Kalawi",
    "Bacolor",
    "Bacong",
    "Bacuag",
    "Badian",
    "Badiangan",
    "Badoc",
    "Bagabag",
    "Bagac",
    "Bagamanoc",
    "Baganga",
    "Baggao",
    "Bagulin",
    "Bagumbayan",
    "Bakun",
    "Balabac",
    "Balabagan",
    "Balagtas",
    "Balamban",
    "Balangiga",
    "Balangkayan",
    "Balaoan",
    "Balasan",
    "Balatan",
    "Balayan",
    "Balbalan",
    "Baleno",
    "Baler",
    "Balete",
    "Balete",
    "Baliangao",
    "Baliguian",
    "Balilihan",
    "Balindong",
    "Balingasag",
    "Balingoan",
    "Ballesteros",
    "Baloi",
    "Balud",
    "Balungao",
    "Bamban",
    "Bambang",
    "Banate",
    "Banaue",
    "Banaybanay",
    "Banayoyo",
    "Banga",
    "Banga",
    "Bangar",
    "Bangued",
    "Bangui",
    "Bani",
    "Banisilan",
    "Banna",
    "Bansalan",
    "Bansud",
    "Bantay",
    "Bantayan",
    "Banton",
    "Baras",
    "Baras",
    "Barbaza",
    "Barcelona",
    "Barili",
    "Barira",
    "Barlig",
    "Barobo",
    "Barotac Nuevo",
    "Barotac Viejo",
    "Baroy",
    "Barugo",
    "Basay",
    "Basco",
    "Basey",
    "Basilisa",
    "Basista",
    "Basud",
    "Batad",
    "Batan",
    "Batangas City",
    "Bataraza",
    "Bato",
    "Bato",
    "Bato",
    "Batuan",
    "Batuan",
    "Bauan",
    "Bauang",
    "Bauko",
    "Baungon",
    "Bautista",
    "Bay",
    "Bayabas",
    "Bayambang",
    "Bayang",
    "Bayog",
    "Bayombong",
    "Belison",
    "Benito Soliven",
    "Besao",
    "Bien Unido",
    "Bilar",
    "Biliran",
    "Binalbagan",
    "Binalonan",
    "Binangonan",
    "Bindoy",
    "Bingawan",
    "Binidayan",
    "Binmaley",
    "Binuangan",
    "Biri",
    "Boac",
    "Bobon",
    "Bocaue",
    "Bokod",
    "Bolinao",
    "Boliney",
    "Boljoon",
    "Bombon",
    "Bongabon",
    "Bongabong",
    "Bongao",
    "Bonifacio",
    "Bontoc",
    "Bontoc",
    "Borbon",
    "Boston",
    "Botolan",
    "Braulio E. Dujali",
    "Brooke's Point",
    "Buadiposo-Buntong",
    "Bubong",
    "Bucay",
    "Bucloc",
    "Buenavista",
    "Buenavista",
    "Buenavista",
    "Buenavista",
    "Buenavista",
    "Bugallon",
    "Bugasong",
    "Buguey",
    "Buguias",
    "Buhi",
    "Bula",
    "Bulacan",
    "Bulalacao",
    "Bulan",
    "Buldon",
    "Buluan",
    "Bulusan",
    "Bunawan",
    "Burauen",
    "Burdeos",
    "Burgos",
    "Burgos",
    "Burgos",
    "Burgos",
    "Burgos",
    "Burgos",
    "Buruanga",
    "Bustos",
    "Busuanga",
    "Butig",
    "Buug",
    "Caba",
    "Cabagan",
    "Cabangan",
    "Cabanglasan",
    "Cabarroguis",
    "Cabatuan",
    "Cabatuan",
    "Cabiao",
    "Cabucgayan",
    "Cabugao",
    "Cabusao",
    "Cagayancillo",
    "Cagdianao",
    "Cagwait",
    "Caibiran",
    "Cainta",
    "Cajidiocan",
    "Calabanga",
    "Calamba",
    "Calanasan",
    "Calanogas",
    "Calape",
    "Calasiao",
    "Calatagan",
    "Calatrava",
    "Calatrava",
    "Calauag",
    "Calauan",
    "Calayan",
    "Calbiga",
    "Calinog",
    "Calintaan",
    "Calubian",
    "Calumpit",
    "Caluya",
    "Camalaniugan",
    "Camalig",
    "Camaligan",
    "Camiling",
    "Canaman",
    "Can-Avid",
    "Candaba",
    "Candelaria",
    "Candelaria",
    "Candijay",
    "Candoni",
    "Cantilan",
    "Caoayan",
    "Capalonga",
    "Capas",
    "Capoocan",
    "Capul",
    "Caraga",
    "Caramoan",
    "Caramoran",
    "Carasi",
    "Cardona",
    "Carigara",
    "Carles",
    "Carmen",
    "Carmen",
    "Carmen",
    "Carmen",
    "Carmen",
    "Carmen",
    "Carranglan",
    "Carrascal",
    "Casiguran",
    "Casiguran",
    "Castilla",
    "Castillejos",
    "Cataingan",
    "Catanauan",
    "Catarman",
    "Catarman",
    "Cateel",
    "Catigbian",
    "Catmon",
    "Catubig",
    "Cauayan",
    "Cavinti",
    "Cawayan",
    "Cervantes",
    "City of Alaminos",
    "City of Angeles",
    "City of Antipolo",
    "City of Bacolod",
    "City of Bacoor",
    "City of Bago",
    "City of Baguio",
    "City of Bais",
    "City of Balanga",
    "City of Baliwag",
    "City of Batac",
    "City of Bayawan",
    "City of Baybay",
    "City of Bayugan",
    "City of Bi¤an",
    "City of Bislig",
    "City of Bogo",
    "City of Borongan",
    "City of Butuan",
    "City of Cabadbaran",
    "City of Cabanatuan",
    "City of Cabuyao",
    "City of Cadiz",
    "City of Cagayan De Oro",
    "City of Calaca",
    "City of Calamba",
    "City of Calapan",
    "City of Calbayog",
    "City of Caloocan",
    "City of Candon",
    "City of Canlaon",
    "City of Carcar",
    "City of Carmona",
    "City of Catbalogan",
    "City of Cauayan",
    "City of Cavite",
    "City of Cebu",
    "City of Cotabato",
    "City of Dagupan",
    "City of Dapitan",
    "City of Dasmari¤as",
    "City of Davao",
    "City of Digos",
    "City of Dipolog",
    "City of Dumaguete",
    "City of El Salvador",
    "City of Escalante",
    "City of Gapan",
    "City of General Santos",
    "City of General Trias",
    "City of Gingoog",
    "City of Guihulngan",
    "City of Himamaylan",
    "City of Ilagan",
    "City of Iligan",
    "City of Iloilo",
    "City of Imus",
    "City of Iriga",
    "City of Isabela",
    "City of Kabankalan",
    "City of Kidapawan",
    "City of Koronadal",
    "City of La Carlota",
    "City of Lamitan",
    "City of Laoag",
    "City of Lapu-Lapu",
    "City of Las Pi¤as",
    "City of Legazpi",
    "City of Ligao",
    "City of Lipa",
    "City of Lucena",
    "City of Maasin",
    "City of Makati",
    "City of Malabon",
    "City of Malaybalay",
    "City of Malolos",
    "City of Mandaluyong",
    "City of Mandaue",
    "City of Manila",
    "City of Marawi",
    "City of Marikina",
    "City of Masbate",
    "City of Mati",
    "City of Meycauayan",
    "City of Muntinlupa",
    "City of Naga",
    "City of Naga",
    "City of Navotas",
    "City of Olongapo",
    "City of Oroquieta",
    "City of Ozamiz",
    "City of Pagadian",
    "City of Palayan",
    "City of Panabo",
    "City of Para¤aque",
    "City of Pasig",
    "City of Passi",
    "City of Puerto Princesa",
    "City of Roxas",
    "City of Sagay",
    "City of San Carlos",
    "City of San Carlos",
    "City of San Fernando",
    "City of San Fernando",
    "City of San Jose Del Monte",
    "City of San Juan",
    "City of San Pablo",
    "City of San Pedro",
    "City of Santa Rosa",
    "City of Santiago",
    "City of Silay",
    "City of Sipalay",
    "City of Sorsogon",
    "City of Sto. Tomas",
    "City of Surigao",
    "City of Tabaco",
    "City of Tabuk",
    "City of Tacloban",
    "City of Tacurong",
    "City of Tagaytay",
    "City of Tagbilaran",
    "City of Taguig",
    "City of Tagum",
    "City of Talisay",
    "City of Talisay",
    "City of Tanauan",
    "City of Tandag",
    "City of Tangub",
    "City of Tanjay",
    "City of Tarlac",
    "City of Tayabas",
    "City of Toledo",
    "City of Trece Martires",
    "City of Urdaneta",
    "City of Valencia",
    "City of Valenzuela",
    "City of Victorias",
    "City of Vigan",
    "City of Zamboanga",
    "Clarin",
    "Clarin",
    "Claver",
    "Claveria",
    "Claveria",
    "Claveria",
    "Columbio",
    "Compostela",
    "Compostela",
    "Concepcion",
    "Concepcion",
    "Concepcion",
    "Concepcion",
    "Conner",
    "Consolacion",
    "Corcuera",
    "Cordon",
    "Cordova",
    "Corella",
    "Coron",
    "Cortes",
    "Cortes",
    "Cuartero",
    "Cuenca",
    "Culaba",
    "Culasi",
    "Culion",
    "Currimao",
    "Cuyapo",
    "Cuyo",
    "Daanbantayan",
    "Daet",
    "Dagami",
    "Dagohoy",
    "Daguioman",
    "Dalaguete",
    "Damulog",
    "Danao",
    "Danao City",
    "Dangcagan",
    "Danglas",
    "Dao",
    "Dapa",
    "Daraga",
    "Daram",
    "Dasol",
    "Datu Abdullah Sangki",
    "Datu Anggal Midtimbang",
    "Datu Blah T. Sinsuat",
    "Datu Hoffer Ampatuan",
    "Datu Odin Sinsuat",
    "Datu Paglas",
    "Datu Piang",
    "Datu Salibo",
    "Datu Saudi Ampatuan",
    "Datu Unsay",
    "Dauin",
    "Dauis",
    "Del Carmen",
    "Del Gallego",
    "Delfin Albano",
    "Diadi",
    "Diffun",
    "Dilasag",
    "Dimasalang",
    "Dimataling",
    "Dimiao",
    "Dinagat",
    "Dinalungan",
    "Dinalupihan",
    "Dinapigue",
    "Dinas",
    "Dingalan",
    "Dingle",
    "Dingras",
    "Dipaculao",
    "Diplahan",
    "Ditsaan-Ramain",
    "Divilacan",
    "Do¤a Remedios Trinidad",
    "Dolores",
    "Dolores",
    "Dolores",
    "Don Carlos",
    "Don Marcelino",
    "Don Victoriano Chiongbian",
    "Donsol",
    "Due¤as",
    "Duero",
    "Dulag",
    "Dumalag",
    "Dumalinao",
    "Dumalneg",
    "Dumangas",
    "Dumanjug",
    "Dumaran",
    "Dumarao",
    "Dumingag",
    "Dupax del Norte",
    "Dupax del Sur",
    "Echague",
    "El Nido",
    "Enrile",
    "Enrique B. Magalona",
    "Enrique Villanueva",
    "Esperanza",
    "Esperanza",
    "Esperanza",
    "Estancia",
    "Famy",
    "Ferrol",
    "Flora",
    "Floridablanca",
    "Gabaldon",
    "Gainza",
    "Galimuyod",
    "Gamay",
    "Gamu",
    "Ganassi",
    "Gandara",
    "Garchitorena",
    "Garcia Hernandez",
    "Gasan",
    "Gattaran",
    "Gen. Mariano Alvarez",
    "Gen. S.K. Pendatun",
    "General Emilio Aguinaldo",
    "General Luna",
    "General Luna",
    "General Macarthur",
    "General Mamerto Natividad",
    "General Nakar",
    "General Tinio",
    "Gerona",
    "Getafe",
    "Gigaquit",
    "Gigmoto",
    "Ginatilan",
    "Giporlos",
    "Gitagum",
    "Glan",
    "Gloria",
    "Goa",
    "Godod",
    "Gonzaga",
    "Governor Generoso",
    "Gregorio del Pilar",
    "Guagua",
    "Gubat",
    "Guiguinto",
    "Guimba",
    "Guimbal",
    "Guinayangan",
    "Guindulman",
    "Guindulungan",
    "Guinobatan",
    "Guinsiliban",
    "Guipos",
    "Guiuan",
    "Gumaca",
    "Gutalac",
    "Hadji Mohammad Ajul",
    "Hadji Muhtamad",
    "Hadji Panglima Tahil",
    "Hagonoy",
    "Hagonoy",
    "Hamtic",
    "Hermosa",
    "Hernani",
    "Hilongos",
    "Hinabangan",
    "Hinatuan",
    "Hindang",
    "Hingyon",
    "Hinigaran",
    "Hinoba-an",
    "Hinunangan",
    "Hinundayan",
    "Hungduan",
    "Iba",
    "Ibaan",
    "Ibajay",
    "Igbaras",
    "Iguig",
    "Ilog",
    "Imelda",
    "Impasug-ong",
    "Inabanga",
    "Indanan",
    "Indang",
    "Infanta",
    "Infanta",
    "Initao",
    "Inopacan",
    "Ipil",
    "Irosin",
    "Isabel",
    "Isabela",
    "Island Garden City of Samal",
    "Isulan",
    "Itbayat",
    "Itogon",
    "Ivana",
    "Ivisan",
    "Jabonga",
    "Jaen",
    "Jagna",
    "Jala-Jala",
    "Jamindan",
    "Janiuay",
    "Jaro",
    "Jasaan",
    "Javier",
    "Jiabong",
    "Jimalalud",
    "Jimenez",
    "Jipapad",
    "Jolo",
    "Jomalig",
    "Jones",
    "Jordan",
    "Jose Abad Santos",
    "Jose Dalman",
    "Jose Panganiban",
    "Josefina",
    "Jovellar",
    "Juban",
    "Julita",
    "Kabacan",
    "Kabasalan",
    "Kabayan",
    "Kabugao",
    "Kabuntalan",
    "Kadayangan",
    "Kadingilan",
    "Kalamansig",
    "Kalawit",
    "Kalayaan",
    "Kalayaan",
    "Kalibo",
    "Kalilangan",
    "Kalingalan Caluang",
    "Kananga",
    "Kapai",
    "Kapalawan",
    "Kapalong",
    "Kapangan",
    "Kapatagan",
    "Kapatagan",
    "Kasibu",
    "Katipunan",
    "Kauswagan",
    "Kawayan",
    "Kawit",
    "Kayapa",
    "Kiamba",
    "Kiangan",
    "Kibawe",
    "Kiblawan",
    "Kibungan",
    "Kinoguitan",
    "Kitaotao",
    "Kitcharao",
    "Kolambugan",
    "Kumalarang",
    "La Castellana",
    "La Libertad",
    "La Libertad",
    "La Paz",
    "La Paz",
    "La Paz",
    "La Paz",
    "La Trinidad",
    "Laak",
    "Labangan",
    "Labason",
    "Labo",
    "Labrador",
    "Lacub",
    "Lagangilang",
    "Lagawe",
    "Lagayan",
    "Lagonglong",
    "Lagonoy",
    "Laguindingan",
    "Lake Sebu",
    "Lakewood",
    "Lala",
    "Lal-Lo",
    "Lambayong",
    "Lambunao",
    "Lamut",
    "Langiden",
    "Languyan",
    "Lantapan",
    "Lantawan",
    "Lanuza",
    "Laoac",
    "Laoang",
    "Lapinig",
    "Lapuyan",
    "Larena",
    "Las Navas",
    "Las Nieves",
    "Lasam",
    "Laua-An",
    "Laur",
    "Laurel",
    "Lavezares",
    "Lawaan",
    "Lazi",
    "Lebak",
    "Leganes",
    "Lemery",
    "Lemery",
    "Leon",
    "Leon T. Postigo",
    "Leyte",
    "Lezo",
    "Lian",
    "Lianga",
    "Libacao",
    "Libagon",
    "Libertad",
    "Libertad",
    "Libjo",
    "Libmanan",
    "Libon",
    "Libona",
    "Libungan",
    "Licab",
    "Licuan-Baay",
    "Lidlidda",
    "Ligawasan",
    "Lila",
    "Liliw",
    "Liloan",
    "Liloan",
    "Liloy",
    "Limasawa",
    "Limay",
    "Linamon",
    "Linapacan",
    "Lingayen",
    "Lingig",
    "Llanera",
    "Llorente",
    "Loay",
    "Lobo",
    "Loboc",
    "Looc",
    "Looc",
    "Loon",
    "Lope De Vega",
    "Lopez",
    "Lopez Jaena",
    "Loreto",
    "Loreto",
    "Los Ba¤os",
    "Luba",
    "Lubang",
    "Lubao",
    "Lubuagan",
    "Lucban",
    "Lugait",
    "Lugus",
    "Luisiana",
    "Lumba-Bayabao",
    "Lumbaca-Unayan",
    "Lumban",
    "Lumbatan",
    "Lumbayanague",
    "Luna",
    "Luna",
    "Luna",
    "Lupao",
    "Lupi",
    "Lupon",
    "Lutayan",
    "Luuk",
    "Maasim",
    "Maasin",
    "Ma-Ayon",
    "Mabalacat City",
    "Mabinay",
    "Mabini",
    "Mabini",
    "Mabini",
    "Mabini",
    "Mabitac",
    "Mabuhay",
    "Macabebe",
    "Macalelon",
    "Macarthur",
    "Maco",
    "Maconacon",
    "Macrohon",
    "Madalag",
    "Madalum",
    "Madamba",
    "Maddela",
    "Madrid",
    "Madridejos",
    "Magalang",
    "Magallanes",
    "Magallanes",
    "Magallanes",
    "Magarao",
    "Magdalena",
    "Magdiwang",
    "Magpet",
    "Magsaysay",
    "Magsaysay",
    "Magsaysay",
    "Magsaysay",
    "Magsaysay",
    "Magsingal",
    "Maguing",
    "Mahaplag",
    "Mahatao",
    "Mahayag",
    "Mahinog",
    "Maigo",
    "Maimbung",
    "Mainit",
    "Maitum",
    "Majayjay",
    "Makato",
    "Makilala",
    "Malabang",
    "Malabuyoc",
    "Malalag",
    "Malangas",
    "Malapatan",
    "Malasiqui",
    "Malay",
    "Malibcong",
    "Malidegao",
    "Malilipot",
    "Malimono",
    "Malinao",
    "Malinao",
    "Malita",
    "Malitbog",
    "Malitbog",
    "Mallig",
    "Malungon",
    "Maluso",
    "Malvar",
    "Mamasapano",
    "Mambajao",
    "Mamburao",
    "Mambusao",
    "Manabo",
    "Manaoag",
    "Manapla",
    "Manay",
    "Mandaon",
    "Mangaldan",
    "Mangatarem",
    "Mangudadatu",
    "Manito",
    "Manjuyod",
    "Mankayan",
    "Manolo Fortich",
    "Mansalay",
    "Manticao",
    "Manukan",
    "Mapanas",
    "Mapandan",
    "Mapun",
    "Marabut",
    "Maragondon",
    "Maragusan",
    "Maramag",
    "Marantao",
    "Marcos",
    "Margosatubig",
    "Maria",
    "Maria Aurora",
    "Maribojoc",
    "Marihatag",
    "Marilao",
    "Maripipi",
    "Mariveles",
    "Marogong",
    "Masantol",
    "Masinloc",
    "Masiu",
    "Maslog",
    "Mataasnakahoy",
    "Matag-Ob",
    "Matalam",
    "Matalom",
    "Matanao",
    "Matanog",
    "Matnog",
    "Matuguinao",
    "Matungao",
    "Mauban",
    "Mawab",
    "Mayantoc",
    "Maydolong",
    "Mayorga",
    "Mayoyao",
    "Medellin",
    "Medina",
    "Mendez",
    "Mercedes",
    "Mercedes",
    "Merida",
    "Mexico",
    "Miagao",
    "Midsalip",
    "Midsayap",
    "Milagros",
    "Milaor",
    "Mina",
    "Minalabac",
    "Minalin",
    "Minglanilla",
    "M'Lang",
    "Moalboal",
    "Mobo",
    "Mogpog",
    "Moises Padilla",
    "Molave",
    "Moncada",
    "Mondragon",
    "Monkayo",
    "Monreal",
    "Montevista",
    "Morong",
    "Morong",
    "Motiong",
    "Mulanay",
    "Mulondo",
    "Munai",
    "Murcia",
    "Mutia",
    "Naawan",
    "Nabalawag",
    "Nabas",
    "Nabua",
    "Nabunturan",
    "Naga",
    "Nagbukel",
    "Nagcarlan",
    "Nagtipunan",
    "Naguilian",
    "Naguilian",
    "Naic",
    "Nampicuan",
    "Narra",
    "Narvacan",
    "Nasipit",
    "Nasugbu",
    "Natividad",
    "Natonin",
    "Naujan",
    "Naval",
    "New Bataan",
    "New Corella",
    "New Lucena",
    "New Washington",
    "Norala",
    "Northern Kabuntalan",
    "Norzagaray",
    "Noveleta",
    "Nueva Era",
    "Nueva Valencia",
    "Numancia",
    "Nunungan",
    "Oas",
    "Obando",
    "Ocampo",
    "Odiongan",
    "Old Kaabakan",
    "Old Panamao",
    "Olutanga",
    "Omar",
    "Opol",
    "Orani",
    "Oras",
    "Orion",
    "Ormoc City",
    "Oslob",
    "Oton",
    "Padada",
    "Padre Burgos",
    "Padre Burgos",
    "Padre Garcia",
    "Paete",
    "Pagagawan",
    "Pagalungan",
    "Pagayawan",
    "Pagbilao",
    "Paglat",
    "Pagsanghan",
    "Pagsanjan",
    "Pagudpud",
    "Pahamuddin",
    "Pakil",
    "Palanan",
    "Palanas",
    "Palapag",
    "Palauig",
    "Palimbang",
    "Palo",
    "Palompon",
    "Paluan",
    "Pambujan",
    "Pamplona",
    "Pamplona",
    "Pamplona",
    "Panaon",
    "Panay",
    "Pandag",
    "Pandami",
    "Pandan",
    "Pandan",
    "Pandi",
    "Panganiban",
    "Pangantucan",
    "Pangil",
    "Panglao",
    "Panglima Estino",
    "Panglima Sugala",
    "Pangutaran",
    "Paniqui",
    "Panitan",
    "Pantabangan",
    "Pantao Ragat",
    "Pantar",
    "Pantukan",
    "Panukulan",
    "Paoay",
    "Paombong",
    "Paracale",
    "Paracelis",
    "Paranas",
    "Parang",
    "Parang",
    "Pasacao",
    "Pasay City",
    "Pasil",
    "Pastrana",
    "Pasuquin",
    "Pata",
    "Pateros",
    "Patikul",
    "Patnanungan",
    "Patnongon",
    "Pavia",
    "Payao",
    "Pe¤ablanca",
    "Pe¤aranda",
    "Pe¤arrubia",
    "Perez",
    "Pi¤an",
    "Piagapo",
    "Piat",
    "Picong",
    "Piddig",
    "Pidigan",
    "Pigkawayan",
    "Pikit",
    "Pila",
    "Pilar",
    "Pilar",
    "Pilar",
    "Pilar",
    "Pilar",
    "Pilar",
    "Pilar",
    "Pili",
    "Pililla",
    "Pinabacdao",
    "Pinamalayan",
    "Pinamungajan",
    "Pinili",
    "Pintuyan",
    "Pinukpuk",
    "Pio Duran",
    "Pio V. Corpus",
    "Pitogo",
    "Pitogo",
    "Placer",
    "Placer",
    "Plaridel",
    "Plaridel",
    "Plaridel",
    "Pola",
    "Polanco",
    "Polangui",
    "Polillo",
    "Polomolok",
    "Pontevedra",
    "Pontevedra",
    "Poona Bayabao",
    "Poona Piagapo",
    "Porac",
    "Poro",
    "Pototan",
    "Pozorrubio",
    "Pres. Manuel A. Roxas",
    "Presentacion",
    "President Carlos P. Garcia",
    "President Quirino",
    "President Roxas",
    "President Roxas",
    "Prieto Diaz",
    "Prosperidad",
    "Pualas",
    "Pudtol",
    "Puerto Galera",
    "Pugo",
    "Pulilan",
    "Pulupandan",
    "Pura",
    "Quezon",
    "Quezon",
    "Quezon",
    "Quezon",
    "Quezon",
    "Quezon",
    "Quezon City",
    "Quinapondan",
    "Quirino",
    "Quirino",
    "Ragay",
    "Rajah Buayan",
    "Ramon",
    "Ramon Magsaysay",
    "Ramos",
    "Rapu-Rapu",
    "Real",
    "Reina Mercedes",
    "Remedios T. Romualdez",
    "Rizal",
    "Rizal",
    "Rizal",
    "Rizal",
    "Rizal",
    "Rizal",
    "Rizal",
    "Rodriguez",
    "Romblon",
    "Ronda",
    "Rosales",
    "Rosario",
    "Rosario",
    "Rosario",
    "Rosario",
    "Rosario",
    "Roseller Lim",
    "Roxas",
    "Roxas",
    "Roxas",
    "Sabangan",
    "Sablan",
    "Sablayan",
    "Sabtang",
    "Sadanga",
    "Sag¤ay",
    "Sagada",
    "Sagay",
    "Sagbayan",
    "Saguday",
    "Saguiaran",
    "Saint Bernard",
    "Salay",
    "Salcedo",
    "Salcedo",
    "Sallapadan",
    "Salug",
    "Salvador",
    "Salvador Benedicto",
    "Samal",
    "Samboan",
    "Sampaloc",
    "San Agustin",
    "San Agustin",
    "San Agustin",
    "San Andres",
    "San Andres",
    "San Andres",
    "San Antonio",
    "San Antonio",
    "San Antonio",
    "San Antonio",
    "San Benito",
    "San Clemente",
    "San Dionisio",
    "San Emilio",
    "San Enrique",
    "San Enrique",
    "San Esteban",
    "San Fabian",
    "San Felipe",
    "San Fernando",
    "San Fernando",
    "San Fernando",
    "San Fernando",
    "San Fernando",
    "San Francisco",
    "San Francisco",
    "San Francisco",
    "San Francisco",
    "San Francisco",
    "San Gabriel",
    "San Guillermo",
    "San Ildefonso",
    "San Ildefonso",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Isidro",
    "San Jacinto",
    "San Jacinto",
    "San Joaquin",
    "San Jorge",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose",
    "San Jose City",
    "San Jose De Buan",
    "San Juan",
    "San Juan",
    "San Juan",
    "San Juan",
    "San Juan",
    "San Juan",
    "San Julian",
    "San Leonardo",
    "San Lorenzo",
    "San Lorenzo Ruiz",
    "San Luis",
    "San Luis",
    "San Luis",
    "San Luis",
    "San Manuel",
    "San Manuel",
    "San Manuel",
    "San Marcelino",
    "San Mariano",
    "San Mateo",
    "San Mateo",
    "San Miguel",
    "San Miguel",
    "San Miguel",
    "San Miguel",
    "San Miguel",
    "San Miguel",
    "San Miguel",
    "San Narciso",
    "San Narciso",
    "San Nicolas",
    "San Nicolas",
    "San Nicolas",
    "San Pablo",
    "San Pablo",
    "San Pascual",
    "San Pascual",
    "San Policarpo",
    "San Quintin",
    "San Quintin",
    "San Rafael",
    "San Rafael",
    "San Remigio",
    "San Remigio",
    "San Ricardo",
    "San Roque",
    "San Sebastian",
    "San Simon",
    "San Teodoro",
    "San Vicente",
    "San Vicente",
    "San Vicente",
    "San Vicente",
    "Sanchez-Mira",
    "Santa",
    "Santa Ana",
    "Santa Ana",
    "Santa Barbara",
    "Santa Barbara",
    "Santa Catalina",
    "Santa Catalina",
    "Santa Cruz",
    "Santa Cruz",
    "Santa Cruz",
    "Santa Cruz",
    "Santa Cruz",
    "Santa Cruz",
    "Santa Elena",
    "Santa Fe",
    "Santa Fe",
    "Santa Fe",
    "Santa Fe",
    "Santa Ignacia",
    "Santa Josefa",
    "Santa Lucia",
    "Santa Magdalena",
    "Santa Marcela",
    "Santa Margarita",
    "Santa Maria",
    "Santa Maria",
    "Santa Maria",
    "Santa Maria",
    "Santa Maria",
    "Santa Maria",
    "Santa Maria",
    "Santa Monica",
    "Santa Praxedes",
    "Santa Rita",
    "Santa Rita",
    "Santa Rosa",
    "Santa Teresita",
    "Santa Teresita",
    "Santander",
    "Santiago",
    "Santiago",
    "Santo Domingo",
    "Santo Domingo",
    "Santo Domingo",
    "Santo Ni¤o",
    "Santo Ni¤o",
    "Santo Ni¤o",
    "Santo Tomas",
    "Santo Tomas",
    "Santo Tomas",
    "Santo Tomas",
    "Santol",
    "Sapad",
    "Sapang Dalaga",
    "Sapa-Sapa",
    "Sapi-An",
    "Sara",
    "Sarangani",
    "Sariaya",
    "Sarrat",
    "Sasmuan",
    "Science City of Mu¤oz",
    "Sebaste",
    "Sen. Ninoy Aquino",
    "Sergio Osme¤a Sr.",
    "Sevilla",
    "Shariff Aguak",
    "Shariff Saydona Mustapha",
    "Siasi",
    "Siaton",
    "Siay",
    "Siayan",
    "Sibagat",
    "Sibalom",
    "Sibonga",
    "Sibuco",
    "Sibulan",
    "Sibunag",
    "Sibutad",
    "Sibutu",
    "Sierra Bullones",
    "Sigay",
    "Sigma",
    "Sikatuna",
    "Silago",
    "Silang",
    "Silvino Lobos",
    "Simunul",
    "Sinacaban",
    "Sinait",
    "Sindangan",
    "Siniloan",
    "Siocon",
    "Sipocot",
    "Siquijor",
    "Sirawai",
    "Siruma",
    "Sison",
    "Sison",
    "Sitangkai",
    "Socorro",
    "Socorro",
    "Sofronio Espa¤ola",
    "Sogod",
    "Sogod",
    "Solana",
    "Solano",
    "Solsona",
    "Sominot",
    "South Ubian",
    "South Upi",
    "Sto. Tomas",
    "Sual",
    "Subic",
    "Sudipen",
    "Sugbongcogon",
    "Sugpon",
    "Sulat",
    "Sulop",
    "Sultan Dumalondong",
    "Sultan Kudarat",
    "Sultan Mastura",
    "Sultan Naga Dimaporo",
    "Sultan Sa Barongis",
    "Sumilao",
    "Sumisip",
    "Surallah",
    "Suyo",
    "Taal",
    "Tabango",
    "Tabina",
    "Tabogon",
    "Tabontabon",
    "Tabuan-Lasa",
    "Tabuelan",
    "Tadian",
    "Taft",
    "Tagana-An",
    "Tagapul-An",
    "Tagbina",
    "Tagkawayan",
    "Tago",
    "Tagoloan",
    "Tagoloan",
    "Tagoloan Ii",
    "Tagudin",
    "Talacogon",
    "Talaingod",
    "Talakag",
    "Talalora",
    "Talavera",
    "Talayan",
    "Talibon",
    "Talipao",
    "Talisay",
    "Talisay",
    "Talisayan",
    "Talitay",
    "Talugtug",
    "Talusan",
    "Tambulig",
    "Tampakan",
    "Tamparan",
    "Tampilisan",
    "Tanauan",
    "Tanay",
    "Tandubas",
    "Tangalan",
    "Tangcal",
    "Tantangan",
    "Tanudan",
    "Tanza",
    "Tapaz",
    "Tapul",
    "Taraka",
    "Tarangnan",
    "Tarragona",
    "Tayasan",
    "Taysan",
    "Taytay",
    "Taytay",
    "Tayug",
    "Tayum",
    "T'Boli",
    "Teresa",
    "Ternate",
    "Tiaong",
    "Tibiao",
    "Tigaon",
    "Tigbao",
    "Tigbauan",
    "Tinambac",
    "Tineg",
    "Tinglayan",
    "Tingloy",
    "Tinoc",
    "Tipo-Tipo",
    "Titay",
    "Tiwi",
    "Tobias Fornier",
    "Toboso",
    "Tolosa",
    "Tomas Oppus",
    "Tongkil",
    "Torrijos",
    "Trento",
    "Trinidad",
    "Tuao",
    "Tuba",
    "Tubajon",
    "Tubao",
    "Tubaran",
    "Tubay",
    "Tubigon",
    "Tublay",
    "Tubo",
    "Tubod",
    "Tubod",
    "Tubungan",
    "Tuburan",
    "Tuburan",
    "Tudela",
    "Tudela",
    "Tugaya",
    "Tuguegarao City",
    "Tugunan",
    "Tukuran",
    "Tulunan",
    "Tumauini",
    "Tunga",
    "Tungawan",
    "Tupi",
    "Turtle Islands",
    "Tuy",
    "Ubay",
    "Umingan",
    "Ungkaya Pukan",
    "Unisan",
    "Upi",
    "Urbiztondo",
    "Uson",
    "Uyugan",
    "Valderrama",
    "Valencia",
    "Valencia",
    "Valladolid",
    "Vallehermoso",
    "Veruela",
    "Victoria",
    "Victoria",
    "Victoria",
    "Victoria",
    "Viga",
    "Villaba",
    "Villanueva",
    "Villareal",
    "Villasis",
    "Villaverde",
    "Villaviciosa",
    "Vincenzo A. Sagun",
    "Vintar",
    "Vinzons",
    "Virac",
    "Wao",
    "Zamboanguita",
    "Zaragoza",
    "Zarraga",
    "Zumarraga"
        ];
        
        // Populate City Dropdown
        function populateCityDropdown() {
            // Sort cities alphabetically
            philippineCities.sort();
            
            // Add cities to hidden dropdown (for form submission)
            philippineCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                cityDropdown.appendChild(option);
            });
            
            // Setup custom searchable dropdown
            setupCustomDropdown();
        }
        
        // Setup custom searchable dropdown functionality
        function setupCustomDropdown() {
            const citySearch = document.getElementById('city-search');
            const cityOptions = document.getElementById('city-options');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            
            // Populate custom dropdown options
            philippineCities.forEach(city => {
                const optionElement = document.createElement('div');
                optionElement.className = 'custom-dropdown-option';
                optionElement.textContent = city;
                optionElement.dataset.value = city;
                
                // Handle option selection
                optionElement.addEventListener('click', function() {
                    // Update the search input with selected city
                    citySearch.value = this.textContent;
                    
                    // Update the hidden select for form submission
                    cityDropdown.value = this.dataset.value;
                    
                    // Close the dropdown
                    cityOptions.classList.remove('active');
                    dropdownArrow.classList.remove('active');
                    
                    // Show all options again for next time
                    showAllOptions();
                });
                
                cityOptions.appendChild(optionElement);
            });
            
            // Toggle dropdown on search input click
            citySearch.addEventListener('click', function() {
                cityOptions.classList.toggle('active');
                dropdownArrow.classList.toggle('active');
                citySearch.focus();
            });
            
            // Toggle dropdown on arrow click
            dropdownArrow.addEventListener('click', function() {
                cityOptions.classList.toggle('active');
                dropdownArrow.classList.toggle('active');
                citySearch.focus();
            });
            
            // Filter options based on search input
            citySearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const options = cityOptions.querySelectorAll('.custom-dropdown-option');
                
                // If search input is not empty, open the dropdown
                if (!cityOptions.classList.contains('active')) {
                    cityOptions.classList.add('active');
                    dropdownArrow.classList.add('active');
                }
                
                options.forEach(option => {
                    const cityName = option.textContent.toLowerCase();
                    const matches = cityName.includes(searchTerm);
                    
                    // Hide/show options based on search
                    option.style.display = matches ? '' : 'none';
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-dropdown')) {
                    cityOptions.classList.remove('active');
                    dropdownArrow.classList.remove('active');
                }
            });
            
            // Function to show all options
            function showAllOptions() {
                const options = cityOptions.querySelectorAll('.custom-dropdown-option');
                options.forEach(option => {
                    option.style.display = '';
                });
            }
            
            // Add placeholder text behavior
            if (!citySearch.value) {
                citySearch.placeholder = "Search for your city...";
            }
        }
        
        // Initialize dropdown when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            populateCityDropdown();
            updatePledgeCounter();
        });
        
        // Enhanced Webview detection with improved platform coverage
        const isInWebView = () => {
            // Check for common webview user agents and environments
            const ua = navigator.userAgent.toLowerCase();
            
            // Store detection result in sessionStorage to avoid recalculating
            if (sessionStorage.getItem('isWebView') !== null) {
                return sessionStorage.getItem('isWebView') === 'true';
            }
            
            // Platform-specific detection methods
            const androidWebView = ua.indexOf('wv') > -1;
            const genericWebView = ua.indexOf('webview') > -1;
            
            // Social media app webviews
            const facebookWebView = ua.indexOf('fbav') > -1 || ua.indexOf('fban') > -1;
            const instagramWebView = ua.indexOf('instagram') > -1;
            const lineWebView = ua.indexOf('line') > -1;
            const twitterWebView = ua.indexOf('twitter') > -1;
            const linkedinWebView = ua.indexOf('linkedin') > -1;
            
            // Mobile app webviews
            const iosWKWebView = typeof window.webkit !== 'undefined' && window.webkit.messageHandlers;
            const reactNativeWebView = typeof window.ReactNativeWebView !== 'undefined';
            const flutterWebView = typeof window.flutter_inappwebview !== 'undefined';
            const cordovaWebView = typeof window.cordova !== 'undefined';
            const capacitorWebView = typeof window.Capacitor !== 'undefined';
            
            // Additional platform checks
            const ieWebView = window.MSStream && !window.MSPointerEvent;
            const androidInterface = typeof window.Android !== 'undefined';
            const iosInterface = typeof window.webkit !== 'undefined' && !iosWKWebView; // Avoid duplicate detection with iosWKWebView
            
            // Check for standalone mode (added to home screen)
            const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
            
            // Combined result
            const result = androidWebView || genericWebView || 
                          facebookWebView || instagramWebView || lineWebView || 
                          twitterWebView || linkedinWebView || iosWKWebView || 
                          reactNativeWebView || flutterWebView || cordovaWebView || 
                          capacitorWebView || ieWebView || androidInterface || 
                          iosInterface || isStandalone;
            
            // Cache the result
            sessionStorage.setItem('isWebView', result.toString());
            
            return result;
        };
        
        // Apply enhanced webview-specific adjustments - moved to DOMContentLoaded for consistency
        // This code is now consolidated with the other webview optimizations below
        
        // Show modal - with both click and touch support
        pledgeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            modalOverlay.classList.add('active');
        });
        
        // Add touch event for better mobile response
        pledgeBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            modalOverlay.classList.add('active');
        }, false);
        
        // Hide modal
        closeModal.addEventListener('click', (e) => {
            e.preventDefault();
            modalOverlay.classList.remove('active');
            successMessage.style.display = 'none';
        });
        
        // Add touch event for close button
        closeModal.addEventListener('touchend', (e) => {
            e.preventDefault();
            modalOverlay.classList.remove('active');
            successMessage.style.display = 'none';
        }, false);
        
        // Close modal when clicking/touching outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                successMessage.style.display = 'none';
            }
        });
        
        modalOverlay.addEventListener('touchend', (e) => {
            if (e.target === modalOverlay) {
                e.preventDefault();
                modalOverlay.classList.remove('active');
                successMessage.style.display = 'none';
            }
        }, false);
        
        // Form submission
        pledgeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('name').value;
            const city = document.getElementById('city').value;
            const email = document.getElementById('email').value;
            
            // Validate city selection
            if (!city) {
                alert('Please select a city or municipality');
                return;
            }
            
            // Create pledge object
            const pledge = {
                name,
                city,
                email,
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            savePledge(pledge);
            
            // Show success message popup with smooth transition
            successMessage.style.display = 'block';
            
            // Create countdown elements if they don't exist
            if (!successMessage.querySelector('.countdown-timer')) {
                const countdownTimer = document.createElement('div');
                countdownTimer.className = 'countdown-timer';
                countdownTimer.innerHTML = 'Redirecting in <span id="countdown-seconds">3</span> seconds...';
                
                const countdownBar = document.createElement('div');
                countdownBar.className = 'countdown-bar';
                
                const countdownProgress = document.createElement('div');
                countdownProgress.className = 'countdown-progress';
                countdownBar.appendChild(countdownProgress);
                
                successMessage.appendChild(countdownTimer);
                successMessage.appendChild(countdownBar);
            }
            
            // Add close button to success message if not already added
            if (!successMessage.querySelector('.close-success')) {
                const closeBtn = document.createElement('button');
                closeBtn.className = 'close-success';
                closeBtn.innerHTML = '×';
                closeBtn.onclick = function() {
                    // Fade out and redirect
                    successMessage.classList.remove('active');
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                        window.location.href = '/';
                    }, 300);
                };
                successMessage.appendChild(closeBtn);
            }
            
            // Reset form
            pledgeForm.reset();
            
            // Start countdown animation
            const countdownProgress = successMessage.querySelector('.countdown-progress');
            const countdownSeconds = successMessage.querySelector('#countdown-seconds');
            
            // Trigger fade in
            setTimeout(() => {
                successMessage.classList.add('active');
            }, 10);
            
            // Start progress bar animation
            setTimeout(() => {
                countdownProgress.style.transform = 'scaleX(0)';
            }, 50);
            
            // Update countdown seconds
            let secondsLeft = 3;
            const countdownInterval = setInterval(() => {
                secondsLeft--;
                if (secondsLeft >= 0) {
                    countdownSeconds.textContent = secondsLeft;
                }
            }, 1000);
            
            // Auto redirect after 3 seconds with smooth transition
            setTimeout(() => {
                clearInterval(countdownInterval);
                successMessage.classList.remove('active');
                setTimeout(() => {
                    successMessage.style.display = 'none';
                    window.location.href = '/';
                }, 300);
            }, 3000);
        });
        
        // Save pledge to localStorage
        function savePledge(pledge) {
            // Get existing pledges or initialize empty array
            let pledges = JSON.parse(localStorage.getItem('pledges')) || [];
            
            // Add new pledge
            pledges.push(pledge);
            
            // Save back to localStorage
            localStorage.setItem('pledges', JSON.stringify(pledges));
            
            // Update pledge counter
            updatePledgeCounter();
        }
        
        // Display pledges function removed
        
        // Update pledge counter function
        function updatePledgeCounter() {
            const pledgeCountElement = document.getElementById('pledge-count');
            const pledges = JSON.parse(localStorage.getItem('pledges')) || [];
            const count = pledges.length;
            
            // Animate counter
            const duration = 1000; // 1 second animation
            const startValue = parseInt(pledgeCountElement.textContent) || 0;
            const endValue = count;
            const startTime = performance.now();
            
            // Only animate if there's a difference
            if (startValue !== endValue) {
                function animateCounter(currentTime) {
                    const elapsedTime = currentTime - startTime;
                    const progress = Math.min(elapsedTime / duration, 1);
                    const currentValue = Math.floor(startValue + (endValue - startValue) * progress);
                    
                    pledgeCountElement.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateCounter);
                    } else {
                        pledgeCountElement.textContent = endValue;
                    }
                }
                
                requestAnimationFrame(animateCounter);
            } else {
                pledgeCountElement.textContent = count;
            }
        }

    </script>
    
    <!-- Footer -->
    <footer style="text-align: center; padding: 1rem; background-color: #f8f8f8; margin-top: 2rem; border-top: 1px solid #ddd;">
        <p style="font-size: 0.9rem;">© 2025 Vote Not For Sale Initiative. All rights reserved.</p>
    </footer>
    
    <style>
        /* Additional responsive styles */
        @media screen and (max-width: 480px) {
            .hero {
                padding: 1rem;
            }
            
            footer {
                padding: 0.8rem;
                margin-top: 1.5rem;
            }
            
            footer p {
                font-size: 0.8rem !important;
            }
        }
        
        /* Enhanced Webview-specific styles */
        .webview-active * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        .webview-active body {
            /* Prevent rubber-band scrolling */
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: auto;
            /* Improve momentum scrolling */
            -webkit-overflow-scrolling: touch;
            /* Prevent pull-to-refresh */
            overscroll-behavior-y: none;
        }
        
        .webview-active .modal {
            /* Improve modal performance in webviews */
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
            /* Improve scrolling in modal */
            -webkit-overflow-scrolling: touch;
            /* Prevent bounce effect */
            overscroll-behavior: contain;
        }
        
        .webview-active input, .webview-active textarea {
            /* Improve form input performance */
            -webkit-appearance: none;
            appearance: none;
            border-radius: 0;
            /* Fix iOS input styling */
            border: 1px solid #ddd;
            /* Prevent auto-zoom */
            font-size: 16px;
            /* Improve touch feedback */
            touch-action: manipulation;
        }
        
        /* Improve touch targets for better usability */
        .btn, .close-modal, input[type="submit"] {
            min-height: 44px; /* Apple's recommended minimum touch target size */
            min-width: 44px;
            touch-action: manipulation;
            /* Add padding for better touch area */
            padding: 0.8rem 1.5rem;
        }
        
        /* Prevent text selection on interactive elements */
        .btn, .close-modal, .logo, .modal-title {
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* Smooth scrolling for modal */
        .modal {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            /* Prevent content shift when keyboard appears */
            padding-bottom: 60px;
        }
        
        /* Optimize animations for webview */
        .webview-active .hero h1 {
            animation: none; /* Disable animations for better performance */
            /* Use hardware acceleration */
            transform: translateZ(0);
        }
        
        /* Fix for iOS form input zoom and keyboard issues */
        @media screen and (max-width: 768px) {
            .webview-active input, .webview-active textarea, .webview-active select {
                font-size: 16px; /* Prevent iOS zoom on focus */
                /* Improve touch feedback */
                touch-action: manipulation;
                /* Fix iOS shadow rendering */
                -webkit-appearance: none;
                appearance: none;
            }
            
            /* Fix iOS keyboard issues */
            .webview-active .modal-overlay.active {
                /* Prevent content shift when keyboard appears */
                position: absolute;
                height: 100%;
            }
        }
        
        /* Fix for Android webview specific issues */
        .webview-active.android {
            /* Fix Android keyboard issues */
            height: 100%;
            overflow: hidden;
        }
        
        /* Fix for iOS webview specific issues */
        .webview-active.ios {
            /* Fix iOS safe area issues */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
    
    <script>
        // Enhanced webview detection and optimization
        document.addEventListener('DOMContentLoaded', function() {
            // Use the enhanced isInWebView function for consistency
            if (isInWebView()) {
                console.log('WebView detected - applying optimizations');
                document.body.classList.add('webview-active');
                
                // Prevent bounce/overscroll effect in iOS WebView
                document.body.style.overscrollBehavior = 'none';
                document.documentElement.style.overscrollBehavior = 'none';
                
                // Disable text selection for better touch experience
                document.body.style.webkitUserSelect = 'none';
                document.body.style.userSelect = 'none';
                
                // Improve touch response
                document.body.style.touchAction = 'manipulation';
                
                // Fix viewport issues in some webviews
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                if (viewportMeta) {
                    viewportMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover';
                }
                
                // Disable pull-to-refresh in Android WebView
                document.addEventListener('touchmove', function(e) {
                    if (document.documentElement.scrollTop === 0) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                // Detect platform for specific optimizations
                const ua = navigator.userAgent.toLowerCase();
                const isIOS = /iphone|ipad|ipod/.test(ua);
                const isAndroid = /android/.test(ua);
                
                // Add platform-specific classes
                if (isIOS) document.body.classList.add('ios');
                if (isAndroid) document.body.classList.add('android');
                
                // Disable zoom gestures (especially for iOS)
                document.addEventListener('gesturestart', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                document.addEventListener('gesturechange', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                document.addEventListener('gestureend', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                // Fix for iOS form focus issues
                const inputs = document.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    // Prevent zoom on focus for iOS
                    if (isIOS) {
                        input.style.fontSize = '16px';
                    }
                    
                    // Improve focus behavior
                    input.addEventListener('focus', function() {
                        // Add a small delay to ensure proper scrolling to the input
                        setTimeout(() => {
                            // Scroll the input into view
                            input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            // For iOS, add extra padding to prevent input from being hidden by keyboard
                            if (isIOS) {
                                document.querySelector('.modal').style.paddingBottom = '150px';
                            }
                        }, 300);
                    });
                    
                    // Reset padding when focus is lost
                    if (isIOS) {
                        input.addEventListener('blur', function() {
                            setTimeout(() => {
                                document.querySelector('.modal').style.paddingBottom = '60px';
                            }, 300);
                        });
                    }
                });
                
                // Improve touch response for buttons
                const buttons = document.querySelectorAll('.btn, .close-modal');
                buttons.forEach(button => {
                    // Add active state for better touch feedback
                    button.addEventListener('touchstart', function() {
                        this.style.opacity = '0.7';
                    });
                    
                    button.addEventListener('touchend', function() {
                        this.style.opacity = '1';
                        setTimeout(() => this.style.opacity = '1', 200);
                    });
                });
                
                // Detect and handle back button in Android WebView
                if (window.history && window.history.pushState) {
                    // Add a dummy state to handle back button
                    window.history.pushState({ page: 1 }, '', '');
                    
                    window.addEventListener('popstate', function(e) {
                        // If share modal is open, close it instead of navigating back
                        if (shareModalOverlay.classList.contains('active')) {
                            e.preventDefault();
                            shareModalOverlay.classList.remove('active');
                            
                            // Push another state to maintain history
                            window.history.pushState({ page: 1 }, '', '');
                            return false;
                        }
                        // If pledge modal is open, close it instead of navigating back
                        else if (modalOverlay.classList.contains('active')) {
                            e.preventDefault();
                            modalOverlay.classList.remove('active');
                            successMessage.style.display = 'none';
                            
                            // Push another state to maintain history
                            window.history.pushState({ page: 1 }, '', '');
                            return false;
                        } else if (isAndroid) {
                            // For Android webview, provide a way to exit the app
                            // This is a common pattern in Android webviews
                            if (window.Android && typeof window.Android.closeWebView === 'function') {
                                window.Android.closeWebView();
                            } else if (confirm('Exit application?')) {
                                // If no native interface is available, at least show a confirmation
                                window.history.go(-1);
                            } else {
                                // If user cancels, push state again to prevent exit
                                window.history.pushState({ page: 1 }, '', '');
                            }
                        }
                    });
                }
                
                // Fix for iOS overscroll/bounce effect
                if (isIOS) {
                    document.body.style.position = 'fixed';
                    document.body.style.width = '100%';
                    document.body.style.height = '100%';
                    document.body.style.overflow = 'auto';
                    document.body.style.webkitOverflowScrolling = 'touch';
                }
                
                // Fix for Android keyboard issues
                if (isAndroid) {
                    // Monitor viewport height changes (keyboard appearance)
                    const viewportHeight = window.innerHeight;
                    window.addEventListener('resize', function() {
                        if (window.innerHeight < viewportHeight) {
                            // Keyboard is visible
                            document.querySelector('.modal').style.paddingBottom = '150px';
                        } else {
                            // Keyboard is hidden
                            document.querySelector('.modal').style.paddingBottom = '60px';
                        }
                    });
                }
            }
        });
    </script>
    
    <!-- Login Modal -->
    <div class="auth-modal-overlay" id="login-modal">
        <div class="auth-modal">
            <div class="auth-modal-header">
                <h2 class="auth-modal-title">Log In</h2>
                <button class="close-auth-modal" id="close-login-modal">&times;</button>
            </div>
            <form class="auth-form" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email or Phone Number</label>
                    <input type="text" id="login-email" placeholder="Email or Philippine phone number (e.g., 09123456789)" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="auth-submit-btn">Log In</button>
                <div class="auth-switch">
                    Don't have an account? <a id="switch-to-signup">Sign Up</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Signup Modal -->
    <div class="auth-modal-overlay" id="signup-modal">
        <div class="auth-modal">
            <div class="auth-modal-header">
                <h2 class="auth-modal-title">Sign Up</h2>
                <button class="close-auth-modal" id="close-signup-modal">&times;</button>
            </div>
            <form class="auth-form" id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Name</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email or Phone Number</label>
                    <input type="text" id="signup-email" placeholder="Email or Philippine phone number (e.g., +639123456789)" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" required>
                </div>
                <button type="submit" class="auth-submit-btn">Sign Up</button>
                <div class="auth-switch">
                    Already have an account? <a id="switch-to-login">Log In</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Firebase Initialization Script -->
    <script src="firebase-init.js"></script>
    
    <!-- Firebase Auth Script -->
    <script src="firebase-auth.js"></script>
</body>
</html>