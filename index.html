<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>Vote Not For Sale - Electoral Integrity Pledge</title>
    <link rel="stylesheet" href="share-modal.css">
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        /* Responsive breakpoints */
        /* Mobile devices */
        @media screen and (max-width: 480px) {
            .hero h1 {
                font-size: 0.91rem; /* Reduced by 30% from 1.3rem */
                padding: 8px 12px;
                margin-bottom: 0.8rem;
                border-width: 2px;
            }
            
            .hero p {
                font-size: 0.95rem;
                line-height: 1.4;
                margin-bottom: 1.5rem;
                padding: 0 10px;
                display: block;
                width: 100%;
                overflow-wrap: break-word;
                word-wrap: break-word;
            }
            
            .modal {
                width: 95%;
                padding: 1.5rem;
            }
            
            .modal-title {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 0.7rem 1.2rem;
            }
            
            header {
                padding: 0.8rem 1rem;
            }
            
            .logo {
                font-size: 1.2rem;
            }
            
            .share-icon {
                width: 20px;
                height: 20px;
            }
        }
        
        /* Tablets */
        @media screen and (min-width: 481px) and (max-width: 768px) {
            .hero h1 {
                font-size: 1.26rem; /* Reduced by 30% from 1.8rem */
                padding: 12px 20px;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
        }
        
        body {
            line-height: 1.6;
            color: #333;
            background-color: #f8f8f8;
        }
        
        /* Header styles */
        header {
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        /* Hero section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        
        .hero h1 {
            font-size: 1.54rem; /* Reduced by 30% from 2.2rem */
            margin-bottom: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
            padding: 15px 25px;
            border: 3px solid rgba(255,255,255,0.7);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255,255,255,0.5);
            background-color: rgba(0,0,0,0.2);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin-bottom: 2rem;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
            padding: 0 10px;
            width: 100%;
            box-sizing: border-box;
        }
        
        /* Pledge Counter Styles */
        .pledge-counter {
            margin: 0.5rem 0 1.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .counter-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 0.8rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: counterPulse 2s infinite alternate;
        }
        
        .counter-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .counter-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 0.2rem;
        }
        
        .counter-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes counterPulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }
        
        /* Responsive counter styles */
        @media screen and (max-width: 480px) {
            .counter-container {
                padding: 0.6rem 1.2rem;
            }
            
            .counter-number {
                font-size: 1.8rem;
            }
            
            .counter-label {
                font-size: 0.7rem;
            }
        }
        
        /* Button styles */
        .button-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .btn:hover {
            background-color: #c0392b;
        }
        
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: 2px solid rgba(255, 255, 255, 0.7);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
            margin-left: 5px;
        }
        
        .share-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .share-icon {
            width: 32px;
            height: 32px;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        /* Form styles */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        @media screen and (max-width: 480px) {
            input, textarea, select {
                padding: 0.6rem;
                font-size: 0.9rem;
            }
            
            .form-group {
                margin-bottom: 1rem;
            }
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .required {
            color: #e74c3c;
        }
        
        /* Success message */
        .success-message {
            background-color: #2ecc71;
            color: white;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            display: none;
        }
        
        .pledge-info {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }
        
        .pledge-info p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #555;
        }
        
        .pledge-info p:last-child {
            margin-bottom: 0;
        }
        
        /* Pledges list */
        .pledges-container {
            margin-top: 2rem;
        }
        
        .pledges-list {
            list-style: none;
        }
        
        .pledge-item {
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 4px 4px 0;
        }
        
        .pledge-meta {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }
        
        @media screen and (max-width: 480px) {
            .pledges-container {
                margin-top: 1.5rem;
            }
            
            .pledge-item {
                padding: 0.8rem;
                margin-bottom: 0.8rem;
            }
            
            .pledge-meta {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">Vote Not For Sale</div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero">
        <h1>MY VOTE IS NOT FOR SALE</h1>
        <div class="pledge-counter">
            <div class="counter-container">
                <span class="counter-number" id="pledge-count">0</span>
                <span class="counter-label">Pledges Submitted</span>
            </div>
        </div>
        <p>A commitment to electoral integrity. Protect Democracy by Taking a Stand. Your vote is your voice in our democracy. By taking this pledge, you're committing to protecting the integrity of our electoral process and standing against corruption.</p>
        <div class="button-container">
            <button class="btn" id="pledge-btn">TAKE THE PLEDGE</button>
            <button class="share-btn" id="share-btn" aria-label="Share">
                <img src="share-icon.png" alt="Share" class="share-icon">
            </button>
        </div>
    </section>
    
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Take the Electoral Integrity Pledge</h2>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            
            <div class="success-message" id="success-message">
                Your pledge has been recorded. Thank you for standing up for electoral integrity!
            </div>
            
            <form id="pledge-form">
                <div class="form-group">
                    <label for="name">Name <span class="required">*</span></label>
                    <input type="text" id="name" required>
                </div>
                
                <div class="form-group">
                    <label for="city">City or Municipality <span class="required">*</span></label>
                    <select id="city" required>
                        <option value="" disabled selected>Select your city or municipality</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="email">Email (optional)</label>
                    <input type="email" id="email">
                </div>
                

                
                <button type="submit" class="btn">Submit Pledge</button>
                
                <div class="pledge-info">
                    <p>By submitting, you pledge to vote with integrity and resist vote buying.</p>
                    <p>Your information is secure and will not be shared publicly.</p>
                    <p>Encourage others to take the pledge! Share this with your friends.</p>
                </div>
            </form>
            

            

        </div>
    </div>
    
    <!-- Share Modal Overlay -->
    <div class="share-modal-overlay" id="share-modal-overlay">
        <div class="share-modal">
            <div class="share-modal-header">
                <h2 class="share-modal-title">Share with friends</h2>
                <button class="close-share-modal" id="close-share-modal">&times;</button>
            </div>
            
            <div class="share-options">
                <a href="#" class="share-option" id="share-facebook">
                    <div class="share-icon-container facebook">
                        <svg width="20" height="20"><use xlink:href="#icon-facebook"></use></svg>
                    </div>
                    <span class="share-option-label">Facebook</span>
                </a>
                
                <a href="#" class="share-option" id="share-messenger">
                    <div class="share-icon-container messenger">
                        <svg width="20" height="20"><use xlink:href="#icon-messenger"></use></svg>
                    </div>
                    <span class="share-option-label">Messenger</span>
                </a>
                
                <a href="#" class="share-option" id="share-whatsapp">
                    <div class="share-icon-container whatsapp">
                        <svg width="20" height="20"><use xlink:href="#icon-whatsapp"></use></svg>
                    </div>
                    <span class="share-option-label">WhatsApp</span>
                </a>
                
                <a href="#" class="share-option" id="share-twitter">
                    <div class="share-icon-container twitter">
                        <svg width="20" height="20"><use xlink:href="#icon-twitter"></use></svg>
                    </div>
                    <span class="share-option-label">Twitter</span>
                </a>
                
                <a href="#" class="share-option" id="share-linkedin">
                    <div class="share-icon-container linkedin">
                        <svg width="20" height="20"><use xlink:href="#icon-linkedin"></use></svg>
                    </div>
                    <span class="share-option-label">LinkedIn</span>
                </a>
                
                <a href="#" class="share-option" id="share-telegram">
                    <div class="share-icon-container telegram">
                        <svg width="20" height="20"><use xlink:href="#icon-telegram"></use></svg>
                    </div>
                    <span class="share-option-label">Telegram</span>
                </a>
                
                <a href="#" class="share-option" id="share-email">
                    <div class="share-icon-container email">
                        <svg width="20" height="20"><use xlink:href="#icon-email"></use></svg>
                    </div>
                    <span class="share-option-label">Email</span>
                </a>
                
                <a href="#" class="share-option" id="share-copy">
                    <div class="share-icon-container copy">
                        <svg width="20" height="20"><use xlink:href="#icon-copy"></use></svg>
                    </div>
                    <span class="share-option-label">Copy Link</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Include SVG Icons -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <!-- Facebook Icon -->
        <symbol id="icon-facebook" viewBox="0 0 24 24">
          <path d="M13.397 20.997v-8.196h2.765l.411-3.209h-3.176V7.548c0-.926.258-1.56 1.587-1.56h1.684V3.127c-.82-.088-1.643-.13-2.467-.127-2.444 0-4.122 1.492-4.122 4.231v2.355H7.332v3.209h2.753v8.202h3.312z"/>
        </symbol>
        
        <!-- Messenger Icon -->
        <symbol id="icon-messenger" viewBox="0 0 24 24">
          <path d="M12 2C6.36 2 2 6.13 2 11.7c0 2.91 1.19 5.44 3.14 7.17.16.14.26.39.27.65l.05 2.02c.02.65.69 1.07 1.27.75l2.26-1.24c.18-.09.38-.13.58-.1 1.13.29 2.35.44 3.43.44 5.64 0 10-4.13 10-9.7C23 6.13 18.64 2 12 2zm6 7.46l-2.93 4.67c-.47.73-1.47.92-2.17.37l-2.34-1.73c-.23-.18-.56-.18-.79 0l-3.16 2.4c-.47.35-1.07-.11-.79-.62l2.93-4.67c.47-.73 1.47-.92 2.17-.37l2.34 1.73c.23.18.56.18.79 0l3.16-2.4c.47-.35 1.07.11.79.62z"/>
        </symbol>
        
        <!-- WhatsApp Icon -->
        <symbol id="icon-whatsapp" viewBox="0 0 24 24">
          <path d="M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"/>
        </symbol>
        
        <!-- Twitter/X Icon -->
        <symbol id="icon-twitter" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </symbol>
        
        <!-- Email Icon -->
        <symbol id="icon-email" viewBox="0 0 24 24">
          <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
        </symbol>
        
        <!-- Copy Link Icon -->
        <symbol id="icon-copy" viewBox="0 0 24 24">
          <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
        </symbol>
        
        <!-- LinkedIn Icon -->
        <symbol id="icon-linkedin" viewBox="0 0 24 24">
          <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/>
        </symbol>
        
        <!-- Telegram Icon -->
        <symbol id="icon-telegram" viewBox="0 0 24 24">
          <path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>
        </symbol>
    </svg>
    
    <script>
        // DOM Elements
        const pledgeBtn = document.getElementById('pledge-btn');
        const shareBtn = document.getElementById('share-btn');
        const modalOverlay = document.getElementById('modal-overlay');
        const closeModal = document.getElementById('close-modal');
        
        // DOM Elements for share modal
        const shareModalOverlay = document.getElementById('share-modal-overlay');
        const closeShareModal = document.getElementById('close-share-modal');
        
        // Share data configuration
        const shareData = {
            title: 'Vote Not For Sale - Electoral Integrity Pledge',
            text: 'Join me in taking a stand for electoral integrity. My vote is not for sale!',
            url: window.location.href
        };
        
        // Share functionality
        shareBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            
            // Check if Web Share API is supported and not in WebView
            if (navigator.share && !isInWebView()) {
                try {
                    await navigator.share(shareData);
                    console.log('Shared successfully');
                } catch (err) {
                    console.log('Error sharing:', err);
                    // Fallback to custom share modal
                    showShareModal();
                }
            } else {
                // Fallback to custom share modal
                showShareModal();
            }
        });
        
        // Show share modal
        function showShareModal() {
            shareModalOverlay.classList.add('active');
        }
        
        // Hide share modal
        closeShareModal.addEventListener('click', (e) => {
            e.preventDefault();
            shareModalOverlay.classList.remove('active');
        });
        
        // Close share modal when clicking outside
        shareModalOverlay.addEventListener('click', (e) => {
            if (e.target === shareModalOverlay) {
                shareModalOverlay.classList.remove('active');
            }
        });
        
        // Add touch event for close button
        closeShareModal.addEventListener('touchend', (e) => {
            e.preventDefault();
            shareModalOverlay.classList.remove('active');
        }, false);
        
        // Fallback function to copy URL to clipboard
        function copyToClipboard(text) {
            // Create temporary input element
            const input = document.createElement('input');
            input.style.position = 'fixed';
            input.style.opacity = 0;
            input.value = text;
            document.body.appendChild(input);
            
            // Select and copy text
            input.select();
            input.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            // Remove temporary element
            document.body.removeChild(input);
            
            // Show feedback to user
            alert('Link copied to clipboard! Share it with your friends.');
        }
        
        // Social media sharing functionality
        document.getElementById('share-facebook').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareData.url)}&quote=${encodeURIComponent(shareData.text)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-messenger').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.facebook.com/dialog/send?app_id=936439947551747&link=${encodeURIComponent(shareData.url)}&redirect_uri=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-whatsapp').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareData.text + ' ' + shareData.url)}`;
            window.open(url, '_blank');
        });
        
        document.getElementById('share-twitter').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}&url=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=300');
        });
        
        document.getElementById('share-linkedin').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareData.url)}`;
            window.open(url, '_blank', 'width=600,height=400');
        });
        
        document.getElementById('share-telegram').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `https://t.me/share/url?url=${encodeURIComponent(shareData.url)}&text=${encodeURIComponent(shareData.text)}`;
            window.open(url, '_blank');
        });
        
        document.getElementById('share-email').addEventListener('click', (e) => {
            e.preventDefault();
            const url = `mailto:?subject=${encodeURIComponent(shareData.title)}&body=${encodeURIComponent(shareData.text + '\n\n' + shareData.url)}`;
            window.location.href = url;
        });
        
        document.getElementById('share-copy').addEventListener('click', (e) => {
            e.preventDefault();
            copyToClipboard(shareData.url);
            shareModalOverlay.classList.remove('active');
        });
        const pledgeForm = document.getElementById('pledge-form');
        const successMessage = document.getElementById('success-message');
        const cityDropdown = document.getElementById('city');
        // pledgesList element removed
        
        // Philippine Cities and Municipalities Data
        const philippineCities = [
            "Alaminos", "Angeles", "Antipolo", "Bacolod", "Bago", "Baguio", "Bais", "Balanga", "Batac", "Batangas City",
            "Bayawan", "Baybay", "Bayugan", "Biñan", "Bislig", "Bogo", "Borongan", "Butuan", "Cabadbaran", "Cabanatuan",
            "Cabuyao", "Cadiz", "Cagayan de Oro", "Calamba", "Calapan", "Calbayog", "Caloocan", "Candon", "Canlaon", "Carcar",
            "Catbalogan", "Cauayan", "Cavite City", "Cebu City", "Cotabato City", "Dagupan", "Danao", "Dapitan", "Dasmariñas", "Davao City",
            "Digos", "Dipolog", "Dumaguete", "El Salvador", "Escalante", "Gapan", "General Santos", "Gingoog", "Guihulngan", "Himamaylan",
            "Ilagan", "Iligan", "Iloilo City", "Imus", "Iriga", "Isabela", "Kabankalan", "Kidapawan", "Koronadal", "La Carlota",
            "Lamitan", "Laoag", "Lapu-Lapu", "Las Piñas", "Legazpi", "Ligao", "Lipa", "Lucena", "Maasin", "Mabalacat",
            "Makati", "Malabon", "Malaybalay", "Malolos", "Mandaluyong", "Mandaue", "Manila", "Marawi", "Marikina", "Masbate City",
            "Mati", "Meycauayan", "Muñoz", "Muntinlupa", "Naga (Camarines Sur)", "Naga (Cebu)", "Navotas", "Olongapo", "Ormoc", "Oroquieta",
            "Ozamiz", "Pagadian", "Palayan", "Panabo", "Parañaque", "Pasay", "Pasig", "Passi", "Puerto Princesa", "Quezon City",
            "Roxas", "Sagay", "Samal", "San Carlos (Negros Occidental)", "San Carlos (Pangasinan)", "San Fernando (La Union)", "San Fernando (Pampanga)", "San Jose", "San Jose del Monte", "San Juan",
            "San Pablo", "San Pedro", "Santa Rosa", "Santiago", "Silay", "Sipalay", "Sorsogon City", "Surigao City", "Tabaco", "Tabuk",
            "Tacloban", "Tacurong", "Tagaytay", "Tagbilaran", "Taguig", "Tagum", "Talisay (Cebu)", "Talisay (Negros Occidental)", "Tanauan", "Tandag",
            "Tangub", "Tanjay", "Tarlac City", "Tayabas", "Toledo", "Trece Martires", "Tuguegarao", "Urdaneta", "Valencia", "Valenzuela",
            "Victorias", "Vigan", "Zamboanga City"
        ];
        
        // Populate City Dropdown
        function populateCityDropdown() {
            // Sort cities alphabetically
            philippineCities.sort();
            
            // Add cities to dropdown
            philippineCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                cityDropdown.appendChild(option);
            });
        }
        
        // Initialize dropdown when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            populateCityDropdown();
            updatePledgeCounter();
        });
        
        // Enhanced Webview detection with improved platform coverage
        const isInWebView = () => {
            // Check for common webview user agents and environments
            const ua = navigator.userAgent.toLowerCase();
            
            // Store detection result in sessionStorage to avoid recalculating
            if (sessionStorage.getItem('isWebView') !== null) {
                return sessionStorage.getItem('isWebView') === 'true';
            }
            
            // Platform-specific detection methods
            const androidWebView = ua.indexOf('wv') > -1;
            const genericWebView = ua.indexOf('webview') > -1;
            
            // Social media app webviews
            const facebookWebView = ua.indexOf('fbav') > -1 || ua.indexOf('fban') > -1;
            const instagramWebView = ua.indexOf('instagram') > -1;
            const lineWebView = ua.indexOf('line') > -1;
            const twitterWebView = ua.indexOf('twitter') > -1;
            const linkedinWebView = ua.indexOf('linkedin') > -1;
            
            // Mobile app webviews
            const iosWKWebView = typeof window.webkit !== 'undefined' && window.webkit.messageHandlers;
            const reactNativeWebView = typeof window.ReactNativeWebView !== 'undefined';
            const flutterWebView = typeof window.flutter_inappwebview !== 'undefined';
            const cordovaWebView = typeof window.cordova !== 'undefined';
            const capacitorWebView = typeof window.Capacitor !== 'undefined';
            
            // Additional platform checks
            const ieWebView = window.MSStream && !window.MSPointerEvent;
            const androidInterface = typeof window.Android !== 'undefined';
            const iosInterface = typeof window.webkit !== 'undefined' && !iosWKWebView; // Avoid duplicate detection with iosWKWebView
            
            // Check for standalone mode (added to home screen)
            const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
            
            // Combined result
            const result = androidWebView || genericWebView || 
                          facebookWebView || instagramWebView || lineWebView || 
                          twitterWebView || linkedinWebView || iosWKWebView || 
                          reactNativeWebView || flutterWebView || cordovaWebView || 
                          capacitorWebView || ieWebView || androidInterface || 
                          iosInterface || isStandalone;
            
            // Cache the result
            sessionStorage.setItem('isWebView', result.toString());
            
            return result;
        };
        
        // Apply enhanced webview-specific adjustments - moved to DOMContentLoaded for consistency
        // This code is now consolidated with the other webview optimizations below
        
        // Show modal - with both click and touch support
        pledgeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            modalOverlay.classList.add('active');
        });
        
        // Add touch event for better mobile response
        pledgeBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            modalOverlay.classList.add('active');
        }, false);
        
        // Hide modal
        closeModal.addEventListener('click', (e) => {
            e.preventDefault();
            modalOverlay.classList.remove('active');
            successMessage.style.display = 'none';
        });
        
        // Add touch event for close button
        closeModal.addEventListener('touchend', (e) => {
            e.preventDefault();
            modalOverlay.classList.remove('active');
            successMessage.style.display = 'none';
        }, false);
        
        // Close modal when clicking/touching outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                successMessage.style.display = 'none';
            }
        });
        
        modalOverlay.addEventListener('touchend', (e) => {
            if (e.target === modalOverlay) {
                e.preventDefault();
                modalOverlay.classList.remove('active');
                successMessage.style.display = 'none';
            }
        }, false);
        
        // Form submission
        pledgeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('name').value;
            const city = document.getElementById('city').value;
            const email = document.getElementById('email').value;
            
            // Create pledge object
            const pledge = {
                name,
                city,
                email,
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            savePledge(pledge);
            
            // Show success message
            successMessage.style.display = 'block';
            
            // Reset form
            pledgeForm.reset();
        });
        
        // Save pledge to localStorage
        function savePledge(pledge) {
            // Get existing pledges or initialize empty array
            let pledges = JSON.parse(localStorage.getItem('pledges')) || [];
            
            // Add new pledge
            pledges.push(pledge);
            
            // Save back to localStorage
            localStorage.setItem('pledges', JSON.stringify(pledges));
            
            // Update pledge counter
            updatePledgeCounter();
        }
        
        // Display pledges function removed
        
        // Update pledge counter function
        function updatePledgeCounter() {
            const pledgeCountElement = document.getElementById('pledge-count');
            const pledges = JSON.parse(localStorage.getItem('pledges')) || [];
            const count = pledges.length;
            
            // Animate counter
            const duration = 1000; // 1 second animation
            const startValue = parseInt(pledgeCountElement.textContent) || 0;
            const endValue = count;
            const startTime = performance.now();
            
            // Only animate if there's a difference
            if (startValue !== endValue) {
                function animateCounter(currentTime) {
                    const elapsedTime = currentTime - startTime;
                    const progress = Math.min(elapsedTime / duration, 1);
                    const currentValue = Math.floor(startValue + (endValue - startValue) * progress);
                    
                    pledgeCountElement.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateCounter);
                    } else {
                        pledgeCountElement.textContent = endValue;
                    }
                }
                
                requestAnimationFrame(animateCounter);
            } else {
                pledgeCountElement.textContent = count;
            }
        }

    </script>
    
    <!-- Footer -->
    <footer style="text-align: center; padding: 1rem; background-color: #f8f8f8; margin-top: 2rem; border-top: 1px solid #ddd;">
        <p style="font-size: 0.9rem;">© 2025 Vote Not For Sale Initiative. All rights reserved.</p>
    </footer>
    
    <style>
        /* Additional responsive styles */
        @media screen and (max-width: 480px) {
            .hero {
                padding: 1rem;
            }
            
            footer {
                padding: 0.8rem;
                margin-top: 1.5rem;
            }
            
            footer p {
                font-size: 0.8rem !important;
            }
        }
        
        /* Enhanced Webview-specific styles */
        .webview-active * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        .webview-active body {
            /* Prevent rubber-band scrolling */
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: auto;
            /* Improve momentum scrolling */
            -webkit-overflow-scrolling: touch;
            /* Prevent pull-to-refresh */
            overscroll-behavior-y: none;
        }
        
        .webview-active .modal {
            /* Improve modal performance in webviews */
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
            /* Improve scrolling in modal */
            -webkit-overflow-scrolling: touch;
            /* Prevent bounce effect */
            overscroll-behavior: contain;
        }
        
        .webview-active input, .webview-active textarea {
            /* Improve form input performance */
            -webkit-appearance: none;
            appearance: none;
            border-radius: 0;
            /* Fix iOS input styling */
            border: 1px solid #ddd;
            /* Prevent auto-zoom */
            font-size: 16px;
            /* Improve touch feedback */
            touch-action: manipulation;
        }
        
        /* Improve touch targets for better usability */
        .btn, .close-modal, input[type="submit"] {
            min-height: 44px; /* Apple's recommended minimum touch target size */
            min-width: 44px;
            touch-action: manipulation;
            /* Add padding for better touch area */
            padding: 0.8rem 1.5rem;
        }
        
        /* Prevent text selection on interactive elements */
        .btn, .close-modal, .logo, .modal-title {
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* Smooth scrolling for modal */
        .modal {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            /* Prevent content shift when keyboard appears */
            padding-bottom: 60px;
        }
        
        /* Optimize animations for webview */
        .webview-active .hero h1 {
            animation: none; /* Disable animations for better performance */
            /* Use hardware acceleration */
            transform: translateZ(0);
        }
        
        /* Fix for iOS form input zoom and keyboard issues */
        @media screen and (max-width: 768px) {
            .webview-active input, .webview-active textarea, .webview-active select {
                font-size: 16px; /* Prevent iOS zoom on focus */
                /* Improve touch feedback */
                touch-action: manipulation;
                /* Fix iOS shadow rendering */
                -webkit-appearance: none;
                appearance: none;
            }
            
            /* Fix iOS keyboard issues */
            .webview-active .modal-overlay.active {
                /* Prevent content shift when keyboard appears */
                position: absolute;
                height: 100%;
            }
        }
        
        /* Fix for Android webview specific issues */
        .webview-active.android {
            /* Fix Android keyboard issues */
            height: 100%;
            overflow: hidden;
        }
        
        /* Fix for iOS webview specific issues */
        .webview-active.ios {
            /* Fix iOS safe area issues */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
    
    <script>
        // Enhanced webview detection and optimization
        document.addEventListener('DOMContentLoaded', function() {
            // Use the enhanced isInWebView function for consistency
            if (isInWebView()) {
                console.log('WebView detected - applying optimizations');
                document.body.classList.add('webview-active');
                
                // Prevent bounce/overscroll effect in iOS WebView
                document.body.style.overscrollBehavior = 'none';
                document.documentElement.style.overscrollBehavior = 'none';
                
                // Disable text selection for better touch experience
                document.body.style.webkitUserSelect = 'none';
                document.body.style.userSelect = 'none';
                
                // Improve touch response
                document.body.style.touchAction = 'manipulation';
                
                // Fix viewport issues in some webviews
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                if (viewportMeta) {
                    viewportMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover';
                }
                
                // Disable pull-to-refresh in Android WebView
                document.addEventListener('touchmove', function(e) {
                    if (document.documentElement.scrollTop === 0) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                // Detect platform for specific optimizations
                const ua = navigator.userAgent.toLowerCase();
                const isIOS = /iphone|ipad|ipod/.test(ua);
                const isAndroid = /android/.test(ua);
                
                // Add platform-specific classes
                if (isIOS) document.body.classList.add('ios');
                if (isAndroid) document.body.classList.add('android');
                
                // Disable zoom gestures (especially for iOS)
                document.addEventListener('gesturestart', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                document.addEventListener('gesturechange', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                document.addEventListener('gestureend', function(e) {
                    e.preventDefault();
                }, { passive: false });
                
                // Fix for iOS form focus issues
                const inputs = document.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    // Prevent zoom on focus for iOS
                    if (isIOS) {
                        input.style.fontSize = '16px';
                    }
                    
                    // Improve focus behavior
                    input.addEventListener('focus', function() {
                        // Add a small delay to ensure proper scrolling to the input
                        setTimeout(() => {
                            // Scroll the input into view
                            input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            // For iOS, add extra padding to prevent input from being hidden by keyboard
                            if (isIOS) {
                                document.querySelector('.modal').style.paddingBottom = '150px';
                            }
                        }, 300);
                    });
                    
                    // Reset padding when focus is lost
                    if (isIOS) {
                        input.addEventListener('blur', function() {
                            setTimeout(() => {
                                document.querySelector('.modal').style.paddingBottom = '60px';
                            }, 300);
                        });
                    }
                });
                
                // Improve touch response for buttons
                const buttons = document.querySelectorAll('.btn, .close-modal');
                buttons.forEach(button => {
                    // Add active state for better touch feedback
                    button.addEventListener('touchstart', function() {
                        this.style.opacity = '0.7';
                    });
                    
                    button.addEventListener('touchend', function() {
                        this.style.opacity = '1';
                        setTimeout(() => this.style.opacity = '1', 200);
                    });
                });
                
                // Detect and handle back button in Android WebView
                if (window.history && window.history.pushState) {
                    // Add a dummy state to handle back button
                    window.history.pushState({ page: 1 }, '', '');
                    
                    window.addEventListener('popstate', function(e) {
                        // If share modal is open, close it instead of navigating back
                        if (shareModalOverlay.classList.contains('active')) {
                            e.preventDefault();
                            shareModalOverlay.classList.remove('active');
                            
                            // Push another state to maintain history
                            window.history.pushState({ page: 1 }, '', '');
                            return false;
                        }
                        // If pledge modal is open, close it instead of navigating back
                        else if (modalOverlay.classList.contains('active')) {
                            e.preventDefault();
                            modalOverlay.classList.remove('active');
                            successMessage.style.display = 'none';
                            
                            // Push another state to maintain history
                            window.history.pushState({ page: 1 }, '', '');
                            return false;
                        } else if (isAndroid) {
                            // For Android webview, provide a way to exit the app
                            // This is a common pattern in Android webviews
                            if (window.Android && typeof window.Android.closeWebView === 'function') {
                                window.Android.closeWebView();
                            } else if (confirm('Exit application?')) {
                                // If no native interface is available, at least show a confirmation
                                window.history.go(-1);
                            } else {
                                // If user cancels, push state again to prevent exit
                                window.history.pushState({ page: 1 }, '', '');
                            }
                        }
                    });
                }
                
                // Fix for iOS overscroll/bounce effect
                if (isIOS) {
                    document.body.style.position = 'fixed';
                    document.body.style.width = '100%';
                    document.body.style.height = '100%';
                    document.body.style.overflow = 'auto';
                    document.body.style.webkitOverflowScrolling = 'touch';
                }
                
                // Fix for Android keyboard issues
                if (isAndroid) {
                    // Monitor viewport height changes (keyboard appearance)
                    const viewportHeight = window.innerHeight;
                    window.addEventListener('resize', function() {
                        if (window.innerHeight < viewportHeight) {
                            // Keyboard is visible
                            document.querySelector('.modal').style.paddingBottom = '150px';
                        } else {
                            // Keyboard is hidden
                            document.querySelector('.modal').style.paddingBottom = '60px';
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>